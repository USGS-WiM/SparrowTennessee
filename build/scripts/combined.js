function addCommas(e){e+="";for(var t=e.split("."),a=t[0],r=t.length>1?"."+t[1]:"",l=/(\d+)(\d{3})/;l.test(a);)a=a.replace(l,"$1,$2");return a+r}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function populateMetricOptions(e){var t;if("radio1"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Group3_st:Group3;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group2_st:Group2;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group1_st:Group1;break;case 3:t=ST}else if("radio2"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Group3_st_tn:Group3_tn;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group2_st_tn:Group2_tn;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group1_st_tn:Group1_tn;break;case 3:t=ST_tn}$("#displayedMetricSelect").find("option").remove(),$.each(t,function(e,t){$("#displayedMetricSelect").append(new Option(t.name,t.field)),$("#displayedMetricSelect").selectpicker("refresh")})}function returnDefaultLayer(e){switch(e){case 4:return 0;case 5:return 1;case 6:return 2;case 11:return 7;case 12:return 8;case 13:return 9}}function setAggregateGroup(e,t){if("radio1"==t){var a;switch(e){case 0:a=$("#st-select")[0].selectedIndex>0?4:0;break;case 1:a=$("#st-select")[0].selectedIndex>0?5:1;break;case 2:a=$("#st-select")[0].selectedIndex>0?6:2;break;case 3:a=3}}else if("radio2"==t){var a;switch(e){case 0:a=$("#st-select")[0].selectedIndex>0?11:7;break;case 1:a=$("#st-select")[0].selectedIndex>0?12:8;break;case 2:a=$("#st-select")[0].selectedIndex>0?13:9;break;case 3:a=10}}var r=[a],l=map.getLayer("SparrowRanking");l.setVisibleLayers(r)}function AOIChange(e){var t=e.currentTarget.id,a=$("#groupResultsSelect")[0].selectedIndex,r=e.currentTarget.value,l=(map.getLayer("SparrowRanking").visibleLayers[0],null);if(void 0!=map.getLayer("SparrowRanking").layerDefinitions)var i=map.getLayer("SparrowRanking").layerDefinitions[0],d=[i];else var d=[];"st-select"==t&&3!=a?(populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(a,$(".radio input[type='radio']:checked")[0].id),setLayerDefs(t,l,d,r)):setLayerDefs(t,l,d,r)}function setLayerDefs(e,t,a,r){"grp1-select"==e&&(t="GRP_1_NAM IN('"+r+"')"),"grp2-select"==e&&(t="GRP_2_NAM IN('"+r+"')"),"st-select"==e&&(t="ST IN('"+r+"')"),a[0]=t,a[1]=t,a[2]=t,a[3]=t,a[4]=t,a[5]=t,a[6]=t,a[7]=t,a[8]=t,a[9]=t,a[10]=t,a[11]=t,a[12]=t,a[13]=t,console.log("Selected Item: "+r),console.log("Select Id: "+e),map.getLayer("SparrowRanking").setLayerDefinitions(a,!1),updateAOI(a[0],e)}function updateAOI(e,t){require(["esri/tasks/FindTask","esri/tasks/FindParameters","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(a,r,l,i,d){function o(e,t,a,l){var i=new esri.tasks.FindTask(e),d=new r;d.layerIds=t,d.layerDefinitions=[l],d.searchText=a,i.execute(d,n)}function n(e){$.each(e,function(e,t){switch(t.layerId){case 1:var a=t.feature.attributes.GRP_2_NAM;console.log("huc8 "+a),$("#grp2-select").append('<option value="item">'+a+"</option>").val(a);break;case 2:var a=t.feature.attributes.GRP_1_NAM;console.log("independent watershed "+a);break;case 5:var a=t.feature.attributes.GRP_1_NAM;console.log("IND watershed "+a);break;case 6:var a=t.feature.attributes.GRP_2_NAM;console.log("Huc8 "+a)}})}switch(console.log("in updateAOI()"),console.log("layerDefs = "+e),console.log("selectId = "+t),t){case"st-select":o(serviceBaseURL,[5,6],$("#st-select")[0].value,e);break;case"grp2-select":o(serviceBaseURL,[1,2],$("#grp2-select")[0].value,e);break;case"grp1-select":o(serviceBaseURL,[1,6],$("#grp1-select")[0].value,e)}})}function getChartOutfields(e){var t=[];switch(console.log("in GetChartOutfields()"),e){case 0:return $.each(Group3,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 1:return $.each(Group2,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 2:return $.each(Group1,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 3:return $.each(ST,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 4:return $.each(Group3_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 5:return $.each(Group2_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 6:return $.each(Group1_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 7:return $.each(Group3_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 8:return $.each(Group2_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 9:return $.each(Group1_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 10:return $.each(ST_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 11:return $.each(Group3_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 12:return $.each(Group2_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 13:return $.each(Group1_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t}}var allLayers;require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","dojo/domReady!"],function(e,t,a){1==$("#radio1")[0].checked?sparrowOverlay=0:sparrowOverlay=1,allLayers=[{groupHeading:"Nutrient Model",showGroupHeading:!0,includeInLayerList:!0,layers:{"Nutrient Model Results Overlay":{url:serviceBaseURL,visibleLayers:[sparrowOverlay],options:{id:"SparrowRanking",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!0,includeLegend:!1}}}},{groupHeading:"Auxilliary Layers",showGroupHeading:!0,includeInLayerList:!0,layers:{"Tennessee Mainstems":{url:serviceBaseURL,visibleLayers:[4],options:{id:"mainstems",opacity:.75,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,hasZoomto:!0,includeLegend:!0}},"Tennessee Streams":{url:serviceBaseURL,visibleLayers:[5],options:{id:"streams",visible:!1,opacity:.6},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!0,includeLegend:!1}}}}]});var serviceBaseURL="http://gis.wim.usgs.gov/arcgis/rest/services/SparrowTennessee/SparrowTennesseeDev/MapServer/",chartUnits=" (lb./yr.)",Group3=[{field:"dl1_g3_tot",name:"Group Aggregate Load delivered to donwstream boundary",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl1_g3_sc1",label:"Wastewater load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc2",label:"Urban-land load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc3",label:"Soil-parent-rock load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc4",label:"Mined-land load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc5",label:"Manure load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc6",label:"Agricultural-land load from HUC10 delivered to downstream boundary (lb/yr)"}]},{field:"dy1_g3_tot",name:"Yield from HUC10 delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy1_g3_sc1",label:"Wastewater yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc2",label:"Urban-land yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc3",label:"Soil-parent-rock yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc4",label:"Mined-land yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc5",label:"Manure yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc6",label:"Agricultural-land yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"}]},{field:"dl3_g3_tot",name:"Load from HUC10 delivered to HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl3_g3_sc1",label:"Wastewater load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc2",label:"Urban-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc3",label:"Soil-parent-rock load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc4",label:"Mined-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc5",label:"Manure load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc6",label:"Agricultural-land load from HUC10 delivered to HUC10 outlet (lb/yr)"}]},{field:"dy3_g3_tot",name:"Yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy3_g3_sc1",label:"Wastewater yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc2",label:"Urban-land yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc3",label:"Soil-parent-rock yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc4",label:"Mined-land yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc5",label:"Manure yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc6",label:"Agricultural-land yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"}]},{field:"al_g3_tot",name:"Accumulated load at HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"al_g3_sc1",label:"Accumulated wastewater load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc2",label:"Accumulated urban-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc3",label:"Accumulated soil-parent-rock load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc4",label:"Accumulated mined-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc5",label:"Accumulated manure load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc6",label:"Accumulated agricultural-land load at HUC10 outlet (lb/yr)"}]},{field:"ay_g3_tot",name:"Accumulated yield at HUC10 outlet (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"ay_g3_sc1",label:"Accumulated wastewater yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc2",label:"Accumulated urban-land yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc3",label:"Accumulated soil-parent-rock yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc4",label:"Accumulated mined-land yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc5",label:"Accumulated manure yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc6",label:"Accumulated agricultural-land yield at HUC10 outlet (lb/yr/mi2)"}]}],Group2=[{field:"dl1_g2_tot",name:"Load from HUC8 delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dl1_g2_sc1",label:"Wastewater load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc2",label:"Urban-land load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc3",label:"Soil-parent-rock load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc4",label:"Mined-land load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc5",label:"Manure load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc6",label:"Agricultural-land load from HUC8 delivered to downstream boundary (lb/yr)"}]},{field:"dy1_g2_tot",name:"Yield from HUC8 delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dy1_g2_sc1",label:"Wastewater yield from HUC8 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g2_sc2",label:"Urban-land yield from HUC8 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g2_sc3",label:"Soil-parent-rock yield from HUC8 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g2_sc4",label:"Mined-land yield from HUC8 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g2_sc5",label:"Manure yield from HUC8 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g2_sc6",label:"Agricultural-land yield from HUC8 delivered to downstream boundary (lb/yr/mi2)"}]},{field:"dl2_g2_tot",name:"Load from HUC8 delivered to HUC8 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dl2_g2_sc1",label:"Wastewater load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc2",label:"Urban-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc3",label:"Soil-parent-rock load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc4",label:"Mined-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc5",label:"Manure load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc6",label:"Agricultural-land load from HUC8 delivered to HUC8 outlet (lb/yr)"}]},{field:"dy2_g2_tot",name:"Yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dy2_g2_sc1",label:"Wastewater yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)"},{attribute:"dy2_g2_sc2",label:"Urban-land yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)"},{attribute:"dy2_g2_sc3",label:"Soil-parent-rock yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)"},{attribute:"dy2_g2_sc4",label:"Mined-land yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)"},{attribute:"dy2_g2_sc5",label:"Manure yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)"},{attribute:"dy2_g2_sc6",label:"Agricultural-land yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)"}]}],Group1=[{field:"dl1_g1_tot",name:"Load from independent watershed delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dl1_g1_sc1",label:"Wastewater load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc2",label:"Urban-land load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc3",label:"Soil-parent-rock load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc4",label:"Mined-land load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc5",label:"Manure load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc6",label:"Agricultural-land load from independent watershed delivered to downstream boundary (lb/yr)"}]},{field:"dy1_g1_tot",name:"Yield from independent watershed delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dy1_g1_sc1",label:"Wastewater yield from independent watershed delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g1_sc2",label:"Urban-land yield from independent watershed delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g1_sc3",label:"Soil-parent-rock yield from independent watershed delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g1_sc4",label:"Mined-land yield from independent watershed delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g1_sc5",label:"Manure yield from independent watershed delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g1_sc6",label:"Agricultural-land yield from independent watershed delivered to downstream boundary (lb/yr/mi2)"}]}],ST=[{field:"dl1_ST_tot",name:"Load from State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dl1_ST_sc1",label:"Wastewater load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc2",label:"Urban-land load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc3",label:"Soil-parent-rock load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc4",label:"Mined-land load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc5",label:"Manure load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc6",label:"Agricultural-land load from State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_ST_tot",name:"Yield from State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dy1_ST_sc1",label:"Wastewater yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_ST_sc2",label:"Urban-land yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_ST_sc3",label:"Soil-parent-rock yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_ST_sc4",label:"Mined-land yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_ST_sc5",label:"Manure yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_ST_sc6",label:"Agricultural-land yield from State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_ST_tot",name:"Load from State within model area (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"l_ST_sc1",label:"Wastewater load from State within model area (lb/yr)"},{attribute:"l_ST_sc2",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc3",label:"Soil-parent-rock load from State within model area (lb/yr)"},{attribute:"l_ST_sc4",label:"Mined-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc5",label:"Manure load from State within model area (lb/yr)"},{attribute:"l_ST_sc6",label:"Agricultural-land load from State within model area (lb/yr)"}]},{field:"y_ST_tot",name:"Yield from State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"y_ST_sc1",label:"Wastewater yield from State within model area (lb/yr/mi2)"},{attribute:"y_ST_sc2",label:"Urban-land yield from State within model area (lb/yr/mi2)"},{attribute:"y_ST_sc3",label:"Soil-parent-rock yield from State within model area (lb/yr/mi2)"},{attribute:"y_ST_sc4",label:"Mined-land yield from State within model area (lb/yr/mi2)"},{attribute:"y_ST_sc5",label:"Manure yield from State within model area (lb/yr/mi2)"},{attribute:"y_ST_sc6",label:"Agricultural-land yield from State within model area (lb/yr/mi2)"}]}],Group3_st=[{field:"dl1_S3_tot",name:"Load from HUC10/State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dl1_S3_sc1",label:"Wastewater load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc2",label:"Urban-land load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc3",label:"Soil-parent-rock load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc4",label:"Mined-land load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc5",label:"Manure load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc6",label:"Agricultural-land load from HUC10/State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_S3_tot",name:"Yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dy1_S3_sc1",label:"Wastewater yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc2",label:"Urban-land yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc3",label:"Soil-parent-rock yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc4",label:"Mined-land yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc5",label:"Manure yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc6",label:"Agricultural-land yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_S3_tot",name:"Load from HUC10/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"l_S3_sc1",label:"Wastewater load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc2",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_S3_sc3",label:"Soil-parent-rock load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc4",label:"Mined-land load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc5",label:"Manure load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc6",label:"Agricultural-land load from HUC10/State within model area (lb/yr)"}]},{field:"y_S3_tot",name:"Yield from HUC10/State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"y_S3_sc1",label:"Wastewater yield from HUC10/State within model area (lb/yr/mi2)"},{attribute:"y_S3_sc2",label:"Urban-land yield from HUC10/State within model area (lb/yr/mi2)"},{attribute:"y_S3_sc3",label:"Soil-parent-rock yield from HUC10/State within model area (lb/yr/mi2)"},{attribute:"y_S3_sc4",label:"Mined-land yield from HUC10/State within model area (lb/yr/mi2)"},{attribute:"y_S3_sc5",label:"Manure yield from HUC10/State within model area (lb/yr/mi2)"},{attribute:"y_S3_sc6",label:"Agricultural-land yield from HUC10/State within model area (lb/yr/mi2)"}]}],Group2_st=[{field:"dl1_S2_tot",name:"Load from HUC8/State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dl1_S2_sc1",label:"Wastewater load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc2",label:"Urban-land load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc3",label:"Soil-parent-rock load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc4",label:"Mined-land load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc5",label:"Manure load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc6",label:"Agricultural-land load from HUC8/State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_S2_tot",name:"Yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dy1_S2_sc1",label:"Wastewater yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc2",label:"Urban-land yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc3",label:"Soil-parent-rock yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc4",label:"Mined-land yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc5",label:"Manure yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc6",label:"Agricultural-land yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_S2_tot",name:"Load from HUC8/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"l_S2_sc1",label:"Wastewater load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc2",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_S2_sc3",label:"Soil-parent-rock load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc4",label:"Mined-land load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc5",label:"Manure load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc6",label:"Agricultural-land load from HUC8/State within model area (lb/yr)"}]},{field:"y_S2_tot",name:"Yield from HUC8/State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"y_S2_sc1",label:"Wastewater yield from HUC8/State within model area (lb/yr/mi2)"},{attribute:"y_S2_sc2",label:"Urban-land yield from HUC8/State within model area (lb/yr/mi2)"},{attribute:"y_S2_sc3",label:"Soil-parent-rock yield from HUC8/State within model area (lb/yr/mi2)"},{attribute:"y_S2_sc4",label:"Mined-land yield from HUC8/State within model area (lb/yr/mi2)"},{attribute:"y_S2_sc5",label:"Manure yield from HUC8/State within model area (lb/yr/mi2)"},{attribute:"y_S2_sc6",label:"Agricultural-land yield from HUC8/State within model area (lb/yr/mi2)"}]}],Group1_st=[{field:"dl1_S1_tot",name:"Load from watershed/State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"dl1_S1_sc1",label:"Wastewater load from watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc2",label:"Urban-land load from watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc3",label:"Soil-parent-rock load from watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc4",label:"Mined-land load from watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc5",label:"Manure load from watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc6",label:"Agricultural-land load from watershed/State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_S1_tot",name:"Yield from watershed/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"dy1_S1_sc1",label:"Wastewater yield from watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc2",label:"Urban-land yield from watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc3",label:"Soil-parent-rock yield from State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc4",label:"Mined-land yield from watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc5",label:"Manure yield from watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc6",label:"Agricultural-land yield from watershed/State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_S1_tot",name:"Load from watershed/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"l_S1_sc1",label:"Wastewater load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc2",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_S1_sc3",label:"Soil-parent-rock load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc4",label:"Mined-land load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc5",label:"Manure load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc6",label:"Agricultural-land load from watershed/State within model area (lb/yr)"}]},{field:"y_S1_tot",name:"Yield from watershed/State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"y_S1_sc1",label:"Wastewater yield from watershed/State within model area (lb/yr/mi2)"},{attribute:"y_S1_sc2",label:"Urban-land yield from watershed/State within model area (lb/yr/mi2)"},{attribute:"y_S1_sc3",label:"Soil-parent-rock yield from watershed/State within model area (lb/yr/mi2)"},{attribute:"y_S1_sc4",label:"Mined-land yield from watershed/State within model area (lb/yr/mi2)"},{attribute:"y_S1_sc5",label:"Manure yield from watershed/State within model area (lb/yr/mi2)"},{attribute:"y_S1_sc6",label:"Agricultural-land yield from watershed/State within model area (lb/yr/mi2)"}]}],Group3_tn=[{field:"dl1_g3_tot",name:"Group Aggregate Load delivered to donwstream boundary",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl1_g3_sc1",label:"Wastewater load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc2",label:"Urban-land load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc3",label:"Atmospheric deposition load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc4",label:"Manure load from HUC10 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g3_sc5",label:"Fertilizer load from HUC10 delivered to downstream boundary (lb/yr)"}]},{field:"dy1_g3_tot",name:"Yield from HUC10 delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy1_g3_sc1",label:"Wastewater yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc2",label:"Urban-land yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc3",label:"Atmospheric deposition yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc4",label:"Manure yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_g3_sc5",label:"Fertilizer yield from HUC10 delivered to downstream boundary (lb/yr/mi2)"}]},{field:"dl3_g3_tot",name:"Load from HUC10 delivered to HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl3_g3_sc1",label:"Wastewater load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc2",label:"Urban-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc3",label:"Atmospheric deposition load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc4",label:"Manure load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc5",label:"Fertilizer load from HUC10 delivered to HUC10 outlet (lb/yr)"}]},{field:"dy3_g3_tot",name:"Yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy3_g3_sc1",label:"Wastewater yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc2",label:"Urban-land yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc3",label:"Atmospheric deposition yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc4",label:"Manure yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"},{attribute:"dy3_g3_sc5",label:"Fertilizer yield from HUC10 delivered to HUC10 outlet (lb/yr/mi2)"}]},{field:"al_g3_tot",name:"Accumulated load at HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"al_g3_sc1",label:"Accumulated wastewater load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc2",label:"Accumulated urban-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc3",label:"Accumulated Atmospheric deposition load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc4",label:"Accumulated Manure load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc5",label:"Accumulated Fertilizer load at HUC10 outlet (lb/yr)"}]},{field:"ay_g3_tot",name:"Accumulated yield at HUC10 outlet (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"ay_g3_sc1",label:"Accumulated wastewater yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc2",label:"Accumulated urban-land yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc3",label:"Accumulated Atmospheric deposition yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc4",label:"Accumulated Manure yield at HUC10 outlet (lb/yr/mi2)"},{attribute:"ay_g3_sc5",label:"Accumulated Fertilizer yield at HUC10 outlet (lb/yr/mi2)"
}]}],Group2_tn=[{field:"dl1_g2_tot",name:"Load from HUC8 delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dl1_g2_sc1",label:"Wastewater load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc2",label:"Urban-land load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc3",label:"Atmospheric deposition load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc4",label:"Manure load from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g2_sc5",label:"Fertilizer load from HUC8 delivered to downstream boundary (lb/yr)"}]},{field:"dy1_g2_tot",name:"Yield from HUC8 delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dy1_g2_sc1",label:"Wastewater yield from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g2_sc2",label:"Urban-land yield from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g2_sc3",label:"Atmospheric deposition yield from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g2_sc4",label:"Manure yield from HUC8 delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g2_sc5",label:"Fertilizer yield from HUC8 delivered to downstream boundary (lb/yr)"}]},{field:"dl2_g2_tot",name:"Load from HUC8 delivered to HUC8 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dl2_g2_sc1",label:"Wastewater load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc2",label:"Urban-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc3",label:"Atmospheric deposition load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc4",label:"Manure load from HUC8 delivered to HUC8 outlet(lb/yr)"},{attribute:"dl2_g2_sc5",label:"Fertilizer load from HUC8 delivered to HUC8 outlet (lb/yr)"}]},{field:"dy2_g2_tot",name:"Yield from HUC8 delivered to HUC8 outlet (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC10 name"},{attribute:"dy2_g2_sc1",label:"Wastewater yield from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dy2_g2_sc2",label:"Urban-land yield from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dy2_g2_sc3",label:"Atmospheric deposition yield from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dy2_g2_sc4",label:"Manure yield from HUC8 delivered to HUC8 outlet(lb/yr)"},{attribute:"dy2_g2_sc5",label:"Fertilizer yield from HUC8 delivered to HUC8 outlet (lb/yr)"}]}],Group1_tn=[{field:"dl1_g1_tot",name:"Load from independent watershed delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dl1_g1_sc1",label:"Wastewater load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc2",label:"Urban-land load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc3",label:"Atmospheric deposition load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc4",label:"Manure load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc5",label:"Fertilizer load from independent watershed delivered to downstream boundary (lb/yr)"}]},{field:"dy1_g1_tot",name:"Yield from independent watershed delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dy1_g1_sc1",label:"Wastewater yield from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g1_sc2",label:"Urban-land yield from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g1_sc3",label:"Atmospheric deposition yield from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g1_sc4",label:"Manure yield from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dy1_g1_sc5",label:"Fertilizer yield from independent watershed delivered to downstream boundary (lb/yr)"}]}],ST_tn=[{field:"dl1_ST_tot",name:"Load from State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dl1_ST_sc1",label:"Wastewater load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc2",label:"Urban-land load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc3",label:"Atmospheric deposition load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc4",label:"Manure load from State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_ST_sc5",label:"Fertilizer load from State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_ST_tot",name:"Yield from State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dy1_ST_sc1",label:"Wastewater yield from State delivered to downstream boundary (lb/yr)"},{attribute:"dy1_ST_sc2",label:"Urban-land yield from State delivered to downstream boundary (lb/yr)"},{attribute:"dy1_ST_sc3",label:"Atmospheric deposition yield from State delivered to downstream boundary (lb/yr)"},{attribute:"dy1_ST_sc4",label:"Manure yield from State delivered to downstream boundary (lb/yr)"},{attribute:"dy1_ST_sc5",label:"Fertilizer yield from State delivered to downstream boundary (lb/yr)"}]},{field:"l_ST_tot",name:"Load from State within model area (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"l_ST_sc1",label:"Wastewater load from State within model area (lb/yr)"},{attribute:"l_ST_sc2",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc3",label:"Atmospheric-deposition load from State within model area (lb/yr)"},{attribute:"l_ST_sc4",label:"Manure load from State within model area (lb/yr)"},{attribute:"l_ST_sc5",label:"Fertilizer load from State within model area (lb/yr)"}]},{field:"y_ST_tot",name:"Yield from State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"y_ST_sc1",label:"Wastewater yield from State within model area (lb/yr)"},{attribute:"y_ST_sc2",label:"Urban-land yield from State within model area (lb/yr)"},{attribute:"y_ST_sc3",label:"Atmospheric-deposition yield from State within model area (lb/yr)"},{attribute:"y_ST_sc4",label:"Manure yield from State within model area (lb/yr)"},{attribute:"y_ST_sc5",label:"Fertilizer yield from State within model area (lb/yr)"}]}],Group3_st_tn=[{field:"dl1_S3_tot",name:"Load from HUC10/State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dl1_S3_sc1",label:"Wastewater load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc2",label:"Urban-land load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc3",label:"Atmospheric deposition load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc4",label:"Manure load from HUC10/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S3_sc5",label:"Fertilizer load from HUC10/State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_S3_tot",name:"Yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dy1_S3_sc1",label:"Wastewater yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc2",label:"Urban-land yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc3",label:"Atmospheric deposition yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc4",label:"Manure yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S3_sc5",label:"Fertilizer yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_S3_tot",name:"Load from HUC10/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"l_S3_sc1",label:"Wastewater load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc2",label:"Urban-land load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc3",label:"Atmospheric-deposition load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc4",label:"Manure load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc5",label:"Fertilizer load from HUC10/State within model area (lb/yr)"}]},{field:"y_S3_tot",name:"Yield from HUC10/State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"y_S3_sc1",label:"Wastewater yield from HUC10/State within model area (lb/yr)"},{attribute:"y_S3_sc2",label:"Urban-land yield from HUC10/State within model area (lb/yr)"},{attribute:"y_S3_sc3",label:"Atmospheric-deposition yield from HUC10/State within model area (lb/yr)"},{attribute:"y_S3_sc4",label:"Manure yield from HUC10/State within model area (lb/yr)"},{attribute:"y_S3_sc5",label:"Fertilizer yield from HUC10/State within model area (lb/yr)"}]}],Group2_st_tn=[{field:"dl1_S2_tot",name:"Load from HUC8/State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dl1_S2_sc1",label:"Wastewater load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc2",label:"Urban-land load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc3",label:"Atmospheric deposition load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc4",label:"Manure load from HUC8/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S2_sc5",label:"Fertilizer load from HUC8/State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_S2_tot",name:"Yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dy1_S2_sc1",label:"Wastewater yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc2",label:"Urban-land yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc3",label:"Atmospheric deposition yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc4",label:"Manure yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S2_sc5",label:"Fertilizer yield from HUC8/State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_S2_tot",name:"Load from HUC8/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"l_S2_sc1",label:"Wastewater load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc2",label:"Urban-land load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc3",label:"Atmospheric-deposition load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc4",label:"Manure load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc5",label:"Fertilizer load from HUC8/State within model area (lb/yr)"}]},{field:"y_S2_tot",name:"Yield from HUC8/State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"y_S2_sc1",label:"Wastewater yield from HUC8/State within model area (lb/yr)"},{attribute:"y_S2_sc2",label:"Urban-land yield from HUC8/State within model area (lb/yr)"},{attribute:"y_S2_sc3",label:"Atmospheric-deposition yield from HUC8/State within model area (lb/yr)"},{attribute:"y_S2_sc4",label:"Manure yield from HUC8/State within model area (lb/yr)"},{attribute:"y_S2_sc5",label:"Fertilizer yield from HUC8/State within model area (lb/yr)"}]}],Group1_st_tn=[{field:"dl1_S1_tot",name:"Load from watershed/State delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"dl1_S1_sc1",label:"Wastewater load from Independend Watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc2",label:"Urban-land load from Independend Watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc3",label:"Atmospheric deposition load from Independend Watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc4",label:"Manure load from Independend Watershed/State delivered to downstream boundary (lb/yr)"},{attribute:"dl1_S1_sc5",label:"Fertilizer load from Independend Watershed/State delivered to downstream boundary (lb/yr)"}]},{field:"dy1_S1_tot",name:"Yield from watershed/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"dy1_S1_sc1",label:"Wastewater yield from Independend Watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc2",label:"Urban-land yield from Independend Watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc3",label:"Atmospheric deposition yield from Independend Watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc4",label:"Manure yield from Independend Watershed/State delivered to downstream boundary (lb/yr/mi2)"},{attribute:"dy1_S1_sc5",label:"Fertilizer yield from Independend Watershed/State delivered to downstream boundary (lb/yr/mi2)"}]},{field:"l_S1_tot",name:"Load from watershed/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"l_S1_sc1",label:"Wastewater load from Independend Watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc2",label:"Urban-land load from Independend Watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc3",label:"Atmospheric-deposition load from Independend Watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc4",label:"Manure load from Independend Watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc5",label:"Fertilizer load from Independend Watershed/State within model area (lb/yr)"}]},{field:"y_S1_tot",name:"Yield from watershed/State within model area (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"y_S1_sc1",label:"Wastewater yield from Independend Watershed/State within model area (lb/yr)"},{attribute:"y_S1_sc2",label:"Urban-land yield from Independend Watershed/State within model area (lb/yr)"},{attribute:"y_S1_sc3",label:"Atmospheric-deposition yield from Independend Watershed/State within model area (lb/yr)"},{attribute:"y_S1_sc4",label:"Manure yield from Independend Watershed/State within model area (lb/yr)"},{attribute:"y_S1_sc5",label:"Fertilizer yield from Independend Watershed/State within model area (lb/yr)"}]}],queryParameters={grp3:{idField:"GRP_3_NUM",nameField:"GRP_3_NAM",alias:"HUC10",serviceId:0,AOISelect:!1},grp2:{idField:"GRP_2_NUM",nameField:"GRP_2_NAM",alias:"HUC8",serviceId:1,AOISelect:!0},grp1:{idField:"GRP_1_NUM",nameField:"GRP_1_NAM",alias:"Independent Watershed",serviceId:2,AOISelect:!0},st:{idField:"ST",nameField:"ST",alias:"State",serviceId:3,AOISelect:!0}},map,allLayers,maxLegendHeight,maxLegendDivHeight,dragInfoWindows=!0,defaultMapCenter=[-86,36],queryParametersLength=Object.getOwnPropertyNames(queryParameters).length;require(["esri/arcgis/utils","esri/map","esri/tasks/QueryTask","esri/tasks/query","esri/Color","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Multipoint","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","esri/geometry/webMercatorUtils","esri/SpatialReference","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,a,r,l,i,d,o,n,s,b,u,c,m,y,_,p,f,h,g,S,w,v,U,C,H,M){function A(e,t,a){var r;r=new esri.tasks.QueryTask(e);var l=new esri.tasks.Query;l.returnGeometry=!1,l.outFields=t,l.where=a,r.execute(l,k)}function k(e){switch(e.displayFieldName){case queryParameters.grp3.nameField:console.log("Currently no AOI for Group 3");break;case queryParameters.grp2.nameField:$.each(e.features,function(e,t){var a=queryParameters.grp2.nameField;$("#grp2-select").append(new Option(t.attributes[a],t.attributes.GRP_2_NUM)),$("#grp2-select").selectpicker("refresh")});break;case queryParameters.grp1.nameField:$.each(e.features,function(e,t){var a=queryParameters.grp1.nameField;$("#grp1-select").append(new Option(t.attributes[a],t.attributes.GRP_1_NUM)),$("#grp1-select").selectpicker("refresh")});break;case queryParameters.st.nameField:$.each(e.features,function(e,t){var a=queryParameters.st.nameField;$("#st-select").append(new Option(t.attributes[a],t.attributes.ST)),$("#st-select").selectpicker("refresh")})}}function L(){1===C.byId("chkExtent").checked?D.activeGeocoder.searchExtent=map.extent:D.activeGeocoder.searchExtent=null}function T(){L();var e=D.find();e.then(function(e){G(e)}),$("#geosearchModal").modal("hide")}function O(e){I();var t=e.graphic?e.graphic:e.result.feature;t.setSymbol(q)}function G(e){if(e=e.results,e.length>0){I();for(var t=0;t<e.length;t++);var a=new c(e[0].feature.geometry);map.centerAndZoom(a,17)}}function I(){map.infoWindow.hide(),map.graphics.clear()}function W(e,t,a,r,l){return new m({angle:0,xoffset:t,yoffset:a,type:"esriPMS",url:e,contentType:"image/png",width:r,height:l})}function x(){$("#chartContainer").empty(),console.log("creating chart query");var e,t=map.getLayer("SparrowRanking").visibleLayers[0];if(map.getLayer("SparrowRanking").layerDefinitions)var a=map.getLayer("SparrowRanking").layerDefinitions[t];else var a="1=1";var r=serviceBaseURL+t;e=new esri.tasks.QueryTask(r);var l=getChartOutfields(t),i=[];$.each(l,function(e,t){i.push(t.attribute)});var d=new esri.tasks.Query;d.returnGeometry=!1,d.outFields=i,d.where=a,e.execute(d,P)}function P(e){function t(){var e=$("#groupResultsSelect")[0].selectedIndex;switch(e){case 0:return"HUC10";case 1:return"HUC8";case 2:return"Independent Watershed";case 3:return"State"}}function a(){var e,t=map.getLayer("SparrowRanking").visibleLayers[0];switch(t){case 0:$.each(Group3,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 1:$.each(Group2,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 2:$.each(Group1,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 3:$.each(ST,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)})}return e+chartUnits}var r=[],i=[],d=[],o=[],n=[];$.each(e.features,function(e,t){n.push(t.attributes)});var s=0;$.each(n,function(e,t){$.each(t,function(e,t){"string"!==jQuery.type(t)&&(s+=t)}),t.total=s,s=0}),n.sort(function(e,t){return parseFloat(t.total)-parseFloat(e.total)}),console.log("featureSort",n),$.each(e.features[0].attributes,function(e,t){i.push(e)}),i.pop(),$.each(i,function(e,t){var a=[];$.each(n,function(e,r){a.push(r[t])}),d.push(a)}),i.shift(),r=d.shift();var b=map.getLayer("SparrowRanking").visibleLayers[0],u=getChartOutfields(b),c=[];$.each(u,function(e,t){c.push(t.label)}),c.shift(),$.each(c,function(e,t){o.push({name:t})}),$.each(d,function(e,t){o[e].data=d[e]}),$("#chartWindowDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,reload:!1,editTitle:!1,minWidth:800,minHeight:800,maxHeight:1e3}),$("#chartWindowDiv").css("visibility","visible"),$("#chartWindowDiv .dropdown").prepend("<div id='chartClose' title='close'><b>X</b></div>"),$("#chartWindowDiv .dropdown").prepend("<div id='chartMinimize' title='collapse'><b>_</b></div>");var m=$("#chartWindowDiv").data("lobiPanel");m.unpin();$("#chartWindowContainer").highcharts();$(function(){Highcharts.setOptions({lang:{thousandsSep:","}}),$("#chartWindowContainer").highcharts({chart:{type:"column",width:770,height:700,zoomType:"x",resetZoomButton:{theme:{display:"none"}},events:{selection:function(e){var t=e.xAxis[0];return t&&$.each(this.series,function(e,t){$.each(t.points,function(e,t){console.log(e,t)})}),$("#resetButton").prop("disabled",!1),!0}}},title:{text:null},subtitle:{text:null},xAxis:{categories:r,title:{text:"Ranked by "+t()}},yAxis:{min:0,title:{text:a()},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{align:"center",x:10,verticalAlign:"top",y:0,floating:!1,padding:5,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{formatter:function(){var e=this.point.index+1;return"<b>"+t()+": "+this.point.category+"</b><br/>"+this.series.name+": "+this.point.y.toFixed(2)+"<br/> Total (lb./yr.) "+this.point.stackTotal.toFixed(2)+"<br/> Rank: "+e}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}},series:{point:{events:{mouseOver:function(){function e(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_GP3_NAM":"GRP_3_NAM";case 1:return $("#st-select")[0].selectedIndex>0?"ST_GP2_NAM":"GRP_2_NAM";case 2:return $("#st-select")[0].selectedIndex>0?"ST_GP1_NAM":"GRP_1_NAM";case 3:return"ST"}}function t(e){map.graphics.clear();var t=e.features[0];t.setSymbol((new _).setColor(new l([209,23,23,.25])).setOutline(null)),map.graphics.add(t)}var a,r=this.category,i=map.getLayer("SparrowRanking").visibleLayers[0],d=map.getLayer("SparrowRanking").url,o=e($("#groupResultsSelect")[0].selectedIndex);a=new esri.tasks.QueryTask(d+i.toString());var n=new esri.tasks.Query;n.returnGeometry=!0,n.outSpatialReference=map.spatialReference,n.outFields=["*"],n.where=o+"= '"+r+"'",a.execute(n,t)}}}}},credits:{enabled:!1},series:o})}),$("#chartMinimize").on("click",function(){$("#chartWindowDiv").css("visibility","hidden")}),$("#chartClose").on("click",function(){map.graphics.clear(),$("#chartWindowDiv").css("visibility","hidden"),$("#chartWindowContainer").empty()}),$("#resetButton").click(function(){var e=$("#chartContainer").highcharts();e.xAxis[0].setExtremes(null,null),$("#resetButton").prop("disabled",!0)}),$("#downloadXLS").click(function(){var e=$("#chartContainer").highcharts();alert(e.getCSV())})}$("#groupResultsSelect").on("loaded.bs.select",function(){populateMetricOptions($("#groupResultsSelect")[0].selectedIndex)}),$("#groupResultsSelect").on("changed.bs.select",function(e){populateMetricOptions(e.currentTarget.selectedIndex),setAggregateGroup(e.currentTarget.selectedIndex,$(".radio input[type='radio']:checked")[0].id)}),map=t("mapDiv",{basemap:"gray",center:defaultMapCenter,zoom:7});for(var R in queryParameters)A(serviceBaseURL+queryParameters[R].serviceId,[queryParameters[R].nameField],"1=1");var N=new i({map:map},"homeButton");N.startup();var z=new d({map:map},"locateButton");z.startup(),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")}),M(map,"load",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=S.webMercatorToGeographic(map.extent.getCenter());if($("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3)),1==dragInfoWindows){var a=U(".title",map.infoWindow.domNode)[0],r=new v(map.infoWindow.domNode,{handle:a});M(r,"FirstMove",function(){var e=U(".outerPointer",map.infoWindow.domNode)[0];H.add(e,"hidden");var e=U(".pointer",map.infoWindow.domNode)[0];H.add(e,"hidden")}.bind(this))}}),M(map,"zoom-end",function(){var e=map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),M(map,"mouse-move",function(e){if($("#mapCenterLabel").css("display","none"),null!=e.mapPoint){var t=S.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}}),M(map,"pan-end",function(){$("#mapCenterLabel").css("display","inline");var e=S.webMercatorToGeographic(map.extent.getCenter());$("#latitude").html(e.y.toFixed(3)),$("#longitude").html(e.x.toFixed(3))});var F=new o("http://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer");M(C.byId("btnStreets"),"click",function(){map.setBasemap("streets"),map.removeLayer(F)}),M(C.byId("btnSatellite"),"click",function(){map.setBasemap("satellite"),map.removeLayer(F)}),M(C.byId("btnHybrid"),"click",function(){map.setBasemap("hybrid"),map.removeLayer(F)}),M(C.byId("btnTerrain"),"click",function(){map.setBasemap("terrain"),map.removeLayer(F)}),M(C.byId("btnGray"),"click",function(){map.setBasemap("gray"),map.removeLayer(F)}),M(C.byId("btnNatGeo"),"click",function(){map.setBasemap("national-geographic"),map.removeLayer(F)}),M(C.byId("btnOSM"),"click",function(){map.setBasemap("osm"),map.removeLayer(F)}),M(C.byId("btnTopo"),"click",function(){map.setBasemap("topo"),map.removeLayer(F)}),M(C.byId("btnNatlMap"),"click",function(){map.addLayer(F)}),M(map,"click",function(e){var t=new b,a=t,r=new esri.InfoTemplate("test popup","attributes and stuff go here");a.setInfoTemplate(r),map.infoWindow.setFeatures([a]),map.infoWindow.show(e.mapPoint),map.infoWindow.show()});var D=new n({value:"",maxLocations:25,autoComplete:!0,arcgisGeocoder:!0,autoNavigate:!1,map:map},"geosearch");D.startup(),D.on("select",O),D.on("findResults",G),D.on("clear",I),M(D.inputNode,"keydown",function(e){13==e.keyCode&&L()});var q=W("../images/purple-pin.png",0,12,13,24);new _(_.STYLE_SOLID,new y(y.STYLE_DASHDOT,new l([255,0,0]),2),new l([255,255,0,.5]));map.on("load",function(){map.infoWindow.set("highlight",!1),map.infoWindow.set("titleInBody",!1)}),M(C.byId("btnGeosearch"),"click",T),$(document).ready(function(){function e(){$("#geosearchModal").modal("show")}function t(){$("#aboutModal").modal("show")}$("#geosearchNav").click(function(){e()}),$("#aboutNav").click(function(){t()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#legendDiv").niceScroll(),maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),$(".radio").on("change",function(e){var t=$("#groupResultsSelect")[0].selectedIndex,a=this.firstElementChild.id;setAggregateGroup(t,a)}),$(".aoiSelect").on("change",AOIChange),$("#clearAOIButton").on("click",function(){var e=map.getLayer("SparrowRanking").visibleLayers[0],t=[4,5,6,11,12,13];if($.inArray(e,t)>-1){e=returnDefaultLayer(e,$(".radio input[type='radio']:checked")[0].id);var a=[];a.push(e),map.getLayer("SparrowRanking").setVisibleLayers(a),map.getLayer("SparrowRanking").setDefaultLayerDefinitions()}else map.getLayer("SparrowRanking").setDefaultLayerDefinitions();$(".aoiSelect").selectpicker("val",""),populateMetricOptions($("#groupResultsSelect")[0].selectedIndex)}),$(".nonAOISelect").on("change",function(){0==$("#groupResultsSelect")[0].selectedIndex&&(4==$("#displayedMetricSelect")[0].selectedIndex||5==$("#displayedMetricSelect")[0].selectedIndex)?$("#chartButton").addClass("disabled"):$("#chartButton").removeClass("disabled")}),$("#chartButton").on("click",x)}),require(["esri/dijit/Legend","esri/tasks/locator","esri/tasks/query","esri/tasks/QueryTask","esri/graphicsUtils","esri/geometry/Point","esri/geometry/Extent","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/SpatialReference","esri/layers/WMSLayer","esri/layers/WMSLayerInfo","dijit/form/CheckBox","dijit/form/RadioButton","dojo/query","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/on"],function(e,t,a,r,l,i,d,o,n,s,b,u,c,m,y,_,p,f,h,g){function S(e,t,a,r,l,d,o){if(map.addLayer(a),v.push([l,camelize(r),a]),l){if(!$("#"+camelize(l)).length){var n=$('<div id="'+camelize(l+" Root")+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <button type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+l+"</button> </div>");n.click(function(e){n.find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$.each(v,function(e,t){var a=map.getLayer(t[2].id);if(t[0]==l)if($("#"+t[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&n.find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",t[1]),map.addLayer(t[2]);var a=map.getLayer(t[2].id);a.setVisibility(!0)}else n.find("i.glyphspan").hasClass("fa-square-o")&&(console.log("removing layer: ",t[1]),map.removeLayer(t[2]))})});var b=$('<div id="'+camelize(l)+'" class="btn-group-vertical" data-toggle="buttons"></div');$("#toggle").append(b)}if(a.visible)var u=$('<div id="'+camelize(r)+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(l)+'" autocomplete="off"><i class="glyphspan fa fa-dot-circle-o '+camelize(l)+'"></i>&nbsp;&nbsp;'+r+"</label> </div>");else var u=$('<div id="'+camelize(r)+'" class="btn-group-vertical lyrTog" style="cursor: pointer;" data-toggle="buttons"> <label class="btn btn-default"  style="font-weight: bold;text-align: left"> <input type="radio" name="'+camelize(l)+'" autocomplete="off"><i class="glyphspan fa fa-circle-o '+camelize(l)+'"></i>&nbsp;&nbsp;'+r+"</label> </div>");$("#"+camelize(l)).append(u),u.click(function(e){if($(this).find("i.glyphspan").hasClass("fa-circle-o")){$(this).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o");var t=$(this)[0].id;$.each(v,function(e,a){if(a[0]==l)if(a[1]==t&&$("#"+camelize(l+" Root")).find("i.glyphspan").hasClass("fa-check-square-o")){console.log("adding layer: ",a[1]),map.addLayer(a[2]);var r=map.getLayer(a[2].id);r.setVisibility(!0)}else a[1]==t&&$("#"+camelize(l+" Root")).find("i.glyphspan").hasClass("fa-square-o")?console.log("groud heading not checked"):(console.log("removing layer: ",a[1]),map.removeLayer(a[2]),$("#"+a[1]).find("i.glyphspan").hasClass("fa-dot-circle-o")&&$("#"+a[1]).find("i.glyphspan").toggleClass("fa-dot-circle-o fa-circle-o"),$("#"+camelize(this[1])).toggle())})}})}else{if(a.visible&&void 0!==o.hasOpacitySlider&&1==o.hasOpacitySlider&&void 0!==o.hasZoomto&&1==o.hasZoomto)var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');else if(a.visible||void 0===o.hasOpacitySlider||1!=o.hasOpacitySlider||void 0===o.hasZoomto||1!=o.hasZoomto)if(a.visible&&void 0!==o.hasOpacitySlider&&1==o.hasOpacitySlider)var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></div>');else if(a.visible||void 0===o.hasOpacitySlider||1!=o.hasOpacitySlider)if(a.visible&&0==o.hasOpacitySlider&&void 0!==o.hasZoomto&&1==o.hasZoomto)var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+r+'<span class="glyphicon glyphicon-search pull-right zoomto"></span></button></span></div>');else if(a.visible||0!=o.hasOpacitySlider||void 0===o.hasZoomto||1!=o.hasZoomto)if(a.visible)var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+r+"</button></span></div>");else var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+r+"</button> </div>");else var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+r+'<span class="glyphicon glyphicon-search pull-right zoomto"></span></button></span></div>');else var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right"></button></div>');else var u=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" data-toggle="buttons"> <button id="'+a.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');
u.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),e.preventDefault(),e.stopPropagation(),$("#"+camelize(r)).toggle(),a.visible?a.setVisibility(!1):a.setVisibility(!0)})}if(t){var c=camelize(e);if(!$("#"+c).length){var m=$('<div id="'+c+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");$("#toggle").append(m)}l?($("#"+c).append(n),$("#"+c).append(b)):($("#"+c).append(u),$("#opacity"+camelize(r)).length>0&&$("#opacity"+camelize(r)).hover(function(){$(".opacitySlider").remove();var e=map.getLayer(d.id).opacity,t=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+e+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(t),$("#slider")[0].value=100*e,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),map.getLayer(d.id).setOpacity(t)})}),$(".zoomto").hover(function(e){$(".zoomDialog").remove();var t=this.parentNode.id,a=$('<div class="zoomDialog"><label class="zoomClose pull-right">X</label><br><div class="list-group"><a href="#" id="zoomscale" class="list-group-item lgi-zoom zoomscale">Zoom to scale</a> <a id="zoomcenter" href="#" class="list-group-item lgi-zoom zoomcenter">Zoom to center</a><a id="zoomextent" href="#" class="list-group-item lgi-zoom zoomextent">Zoom to extent</a></div></div>');$("body").append(a),$(".zoomDialog").css("left",event.clientX-80),$(".zoomDialog").css("top",event.clientY-5),$(".zoomDialog").mouseleave(function(){$(".zoomDialog").remove()}),$(".zoomClose").click(function(){$(".zoomDialog").remove()}),$("#zoomscale").click(function(e){var a=map.getLayer(t).minScale;map.setScale(a)}),$("#zoomcenter").click(function(e){var t=new i(defaultMapCenter,new s({wkid:4326}));map.centerAt(t)}),$("#zoomextent").click(function(e){var a=map.getLayer(t).fullExtent;map.setExtent(a)})}))}else $("#toggle").append(u)}var w=[],v=[];$.each(allLayers,function(e,t){console.log("processing: ",t.groupHeading),$.each(t.layers,function(e,a){var r="";if(a.wimOptions.exclusiveGroupName&&(r=a.wimOptions.exclusiveGroupName),"agisFeature"===a.wimOptions.layerType){var l=new n(a.url,a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&w.push({layer:l,title:e}),S(t.groupHeading,t.showGroupHeading,l,e,r,a.options,a.wimOptions)}else if("agisWMS"===a.wimOptions.layerType){var l=new b(a.url,{resourceInfo:a.options.resourceInfo,visibleLayers:a.options.visibleLayers},a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&w.push({layer:l,title:e}),S(t.groupHeading,t.showGroupHeading,l,e,r,a.options,a.wimOptions)}else if("agisDynamic"===a.wimOptions.layerType){var l=new o(a.url,a.options);a.wimOptions&&1==a.wimOptions.includeLegend&&w.push({layer:l,title:e}),a.visibleLayers&&l.setVisibleLayers(a.visibleLayers),S(t.groupHeading,t.showGroupHeading,l,e,r,a.options,a.wimOptions)}})});var U=new e({map:map,layerInfos:w},"legendDiv");U.startup()})}),$(document).ready(function(){}),$(".selectpicker").selectpicker();