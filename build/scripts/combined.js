function addCommas(e){e+="";for(var t=e.split("."),a=t[0],r=t.length>1?"."+t[1]:"",l=/(\d+)(\d{3})/;l.test(a);)a=a.replace(l,"$1,$2");return a+r}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function loadEventHandlers(){$(".radio").on("change",function(e){var t=$("#groupResultsSelect")[0].selectedIndex,a=this.firstElementChild.id;populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(t,a),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&app.createChartQuery(),$("#tableResizable").is(":visible")&&app.createTableQuery()}),$("#exportTableButton").on("click",function(){$("#resultsTable").tableToCSV()}),$("#phosphorusDownload").click(function(){window.location="https://sparrow.wim.usgs.gov/sparrow-tennessee/downloads/tenn_shapefiles_phosphorus.zip"}),$("#nitrogenDownload").click(function(){window.location="https://sparrow.wim.usgs.gov/sparrow-tennessee/downloads/tenn_shapefiles_nitrogen.zip"}),$("#popupChartButton").on("click",function(){app.createChartQuery()}),$(".aoiSelect").on("change",AOIChange),$("#groupResultsSelect").on("loaded.bs.select",function(){populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),0==$("#groupResultsSelect")[0].selectedIndex?$("#tableButton").show():$("#tableButton").hide(),generateRenderer()}),$("#groupResultsSelect").on("changed.bs.select",function(e){app.clearFindGraphics(),0==$("#groupResultsSelect")[0].selectedIndex?$("#tableButton").show():($("#tableButton").hide(),$("#tableResizable").hide()),populateMetricOptions(e.currentTarget.selectedIndex),setAggregateGroup(e.currentTarget.selectedIndex,$(".radio input[type='radio']:checked")[0].id),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&(app.map.graphics.clear(),app.createChartQuery())}),$("#displayedMetricSelect").on("changed.bs.select",function(e){generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&app.createChartQuery()}),$("#clearAOIButton").on("click",function(){var e=app.map.getLayer("SparrowRanking").visibleLayers[0];if($.inArray(e,splitLayers)>-1){e=returnDefaultLayer(e,$(".radio input[type='radio']:checked")[0].id);var t=[];t.push(e),app.map.getLayer("SparrowRanking").setVisibleLayers(t),app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0)}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0);$(".aoiSelect").selectpicker("val",""),populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),app.clearLayerDefObj(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&app.createChartQuery(),$("#tableResizable").is(":visible")&&app.createTableQuery()}),$(".nonAOISelect").on("change",function(){switch($("#groupResultsSelect")[0].selectedIndex){case 0:$("#grp1-select").removeClass("disabled"),$("#grp1-select").removeAttr("disabled"),$(".grp1-warning").remove(),$("#grp1-select").selectpicker("refresh"),$("#grp2-select").removeClass("disabled"),$("#grp2-select").removeAttr("disabled"),$(".grp2-warning").remove(),$("#grp2-select").selectpicker("refresh");break;case 1:$("#grp1-select").removeClass("disabled"),$("#grp1-select").removeAttr("disabled"),$(".grp1-warning").remove(),$("#grp1-select").selectpicker("refresh"),$("#grp2-select").removeClass("disabled"),$("#grp2-select").removeAttr("disabled"),$(".grp2-warning").remove(),$("#grp2-select").selectpicker("refresh");break;case 2:if(app.getLayerDefObj().AOI2){$("#clear_btn").append("<a class='grp2-warning' data-toggle='tooltip' data-placement='top' title='Cannot show HUC8 Area of Interest while grouping by Independent Watershed.'><span class='glyphicon glyphicon-warning-sign'></span></a>"),$("#grp2-select option").attr("selected",!1),app.clearOneLayerDefObj("AOI2");var e={currentTarget:{id:"grp2-select",value:""}};AOIChange(e)}$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").removeClass("disabled"),$("#grp1-select").removeAttr("disabled"),$(".grp2-warning").remove(),$("#grp1-select").selectpicker("refresh");break;case 3:if(app.getLayerDefObj().AOI1){$("#clear_btn").append("<a class='grp1-warning' data-toggle='tooltip' data-placement='top' title='Cannot show Independent Watershed Area of Interest while grouping by State.'><span class='glyphicon glyphicon-warning-sign'></span></a>"),$("#grp1-select option").attr("selected",!1),app.clearOneLayerDefObj("AOI1");var t={currentTarget:{id:"grp1-select",value:""}};AOIChange(t)}if($("#grp1-select").attr("disabled","disabled"),$("#grp1-select").addClass("disabled"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI2){$("#clear_btn").append("<a class='grp2-warning' data-toggle='tooltip' data-placement='top' title='Cannot show HUC8 Area of Interest while grouping by State.'><span class='glyphicon glyphicon-warning-sign'></span></a>"),$("#grp2-select option").attr("selected",!1),app.clearOneLayerDefObj("AOI2");var a={currentTarget:{id:"grp2-select",value:""}};AOIChange(a)}$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh")}}),$("#chartButton").on("click",function(){app.createChartQuery()}),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")}),app.map.on("load",function(){app.initMapScale(),app.map.infoWindow.set("highlight",!1),app.map.infoWindow.set("titleInBody",!1),app.setupDraggableInfoWindow()}),app.map.on("zoom-end",function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),app.map.on("mouse-move",function(e){app.updateMousePosition(e)}),app.map.on("pan-end",function(){app.updateMapCenter(app.map.extent)}),app.map.on("click",function(e){app.identifyParams=new esri.tasks.IdentifyParameters,app.identifyParams.tolerance=8,app.identifyParams.returnGeometry=!0,app.identifyParams.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE,app.identifyParams.width=app.map.width,app.identifyParams.height=app.map.height,app.identifyTask=new esri.tasks.IdentifyTask(serviceBaseURL),app.map.getLayer("SparrowRanking").layerDefinitions&&(app.identifyParams.layerDefinitions=app.map.getLayer("SparrowRanking").layerDefinitions),app.executeIdentifyTask(e)}),$("#btnStreets").on("click",function(){app.map.setBasemap("streets"),app.map.removeLayer(nationalMapBasemap)}),$("#btnSatellite").on("click",function(){app.map.setBasemap("satellite"),app.map.removeLayer(nationalMapBasemap)}),$("#btnHybrid").on("click",function(){app.map.setBasemap("hybrid"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTerrain").on("click",function(){app.map.setBasemap("terrain"),app.map.removeLayer(nationalMapBasemap)}),$("#btnGray").on("click",function(){app.map.setBasemap("gray"),app.map.removeLayer(nationalMapBasemap)}),$("#btnNatGeo").on("click",function(){app.map.setBasemap("national-geographic"),app.map.removeLayer(nationalMapBasemap)}),$("#btnOSM").on("click",function(){app.map.setBasemap("osm"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTopo").on("click",function(){app.map.setBasemap("topo"),app.map.removeLayer(nationalMapBasemap)})}function populateMetricOptions(e){var t;if("radio1"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Group3_st:Group3;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group2_st:Group2;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group1_st:Group1;break;case 3:t=ST}else if("radio2"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Group3_st_tn:Group3_tn;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group2_st_tn:Group2_tn;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group1_st_tn:Group1_tn;break;case 3:t=ST_tn}$("#displayedMetricSelect").find("option").remove(),$.each(t,function(e,t){$("#displayedMetricSelect").append(new Option(t.name,t.field)),$("#displayedMetricSelect").selectpicker("refresh")})}function returnDefaultLayer(e){switch(e){case 4:return 0;case 5:return 1;case 6:return 2;case 11:return 7;case 12:return 8;case 13:return 9}}function setAggregateGroup(e,t){if("radio1"==t){var a;switch(e){case 0:a=$("#st-select")[0].selectedIndex>0?4:0;break;case 1:a=$("#st-select")[0].selectedIndex>0?5:1;break;case 2:a=$("#st-select")[0].selectedIndex>0?6:2;break;case 3:a=3}}else if("radio2"==t){var a;switch(e){case 0:a=$("#st-select")[0].selectedIndex>0?11:7;break;case 1:a=$("#st-select")[0].selectedIndex>0?12:8;break;case 2:a=$("#st-select")[0].selectedIndex>0?13:9;break;case 3:a=10}}var r=[a],l=app.map.getLayer("SparrowRanking");l.setVisibleLayers(r)}function AOIChange(e){var t=e.currentTarget.id,a=e.currentTarget.value,r=$("#groupResultsSelect")[0].selectedIndex,l={selectedId:t,selectedValue:a};"st-select"==t&&3!=r&&(populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(r,$(".radio input[type='radio']:checked")[0].id)),""!=l.selectedValue&&app.setLayerDefObj(l),setLayerDefs(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&(app.map.graphics.clear(),app.createChartQuery()),$("#tableResizable").is(":visible")&&app.createTableQuery()}function setLayerDefs(){var e="",t=app.getLayerDefObj();t.AOIST&&(e+=""!=e?" AND ST = '"+t.AOIST+"'":"ST = '"+t.AOIST+"'"),t.AOI1&&(e+=""!=e?" AND GRP_1_NAM = '"+t.AOI1+"'":"GRP_1_NAM = '"+t.AOI1+"'"),t.AOI2&&(e+=""!=e?" AND GRP_2_NAM = '"+t.AOI2+"'":"GRP_2_NAM = '"+t.AOI2+"'");var a=[];a[0]=e,a[1]=e,a[2]=e,a[3]=e,a[4]=e,a[5]=e,a[6]=e,a[7]=e,a[8]=e,a[9]=e,a[10]=e,a[11]=e,a[12]=e,a[13]=e,app.map.getLayer("SparrowRanking").setLayerDefinitions(a)}function updateAOI(e,t){require(["esri/tasks/FindTask","esri/tasks/FindParameters","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(a,r,l,i,o){function d(e,t,a,l){var i=new esri.tasks.FindTask(e),o=new r;o.layerIds=t,o.layerDefinitions=[l],o.searchText=a,i.execute(o,n)}function n(e){$.each(e,function(e,t){switch(t.layerId){case 1:var a=t.feature.attributes.GRP_2_NAM;console.log("huc8 "+a),$("#grp2-select").append('<option value="item">'+a+"</option>").val(a);break;case 2:var a=t.feature.attributes.GRP_1_NAM;console.log("independent watershed "+a);break;case 5:var a=t.feature.attributes.GRP_1_NAM;console.log("IND watershed "+a);break;case 6:var a=t.feature.attributes.GRP_2_NAM;console.log("Huc8 "+a)}})}switch(console.log("in updateAOI()"),console.log("layerDefs = "+e),console.log("selectId = "+t),t){case"st-select":d(serviceBaseURL,[5,6],$("#st-select")[0].value,e);break;case"grp2-select":d(serviceBaseURL,[1,2],$("#grp2-select")[0].value,e);break;case"grp1-select":d(serviceBaseURL,[1,6],$("#grp1-select")[0].value,e)}})}function getTableFields(e,t){var a=[],r=[],l=[],i="";switch(t){case 0:l=Group3,i="GRP_3_NAM",$.each(tableOutFields,function(e,t){a.push(t)});break;case 4:l=Group3_st,i="ST_GP3_NAM",$.each(stateTableOutFields,function(e,t){a.push(t)});break;case 7:l=Group3_tn,i="GRP_3_NAM",$.each(tableOutFields,function(e,t){a.push(t)});break;case 11:l=Group3_st_tn,i="ST_GP3_NAM",$.each(stateTableOutFields,function(e,t){a.push(t)})}return $.each(l,function(e,t){a.push({field:t.field,name:t.name}),$.each(t.chartOutfields,function(e,t){t.attribute==i&&a.map(function(e){return e.field}).indexOf(i)<0?a.push({field:t.attribute,name:t.label}):t.attribute!=i&&a.push({field:t.attribute,name:t.label})})}),r.push("<tr>"),$.each(e,function(e,t){console.log(t),$.each(a,function(e,a){return t==a.field?(console.log(a.field),r.push("<th>"+a.name+"</th>"),!1):void 0})}),r.push("</tr>"),r.join("")}function getLegendLabels(e){var t="";switch(e){case 0:return $.each(Group3,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 1:return $.each(Group2,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 2:return $.each(Group1,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 3:return $.each(ST,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 4:return $.each(Group3_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 5:return $.each(Group2_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 6:return $.each(Group1_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 7:return $.each(Group3_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 8:return $.each(Group2_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 9:return $.each(Group1_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 10:return $.each(ST_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 11:return $.each(Group3_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 12:return $.each(Group2_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t;case 13:return $.each(Group1_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&(t=a.name)}),t}}function getChartOutfields(e){var t=[];switch(console.log("in GetChartOutfields()"),e){case 0:return $.each(Group3,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 1:return $.each(Group2,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 2:return $.each(Group1,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 3:return $.each(ST,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 4:return $.each(Group3_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 5:return $.each(Group2_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 6:return $.each(Group1_st,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 7:return $.each(Group3_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 8:return $.each(Group2_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 9:return $.each(Group1_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 10:return $.each(ST_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 11:return $.each(Group3_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 12:return $.each(Group2_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t;case 13:return $.each(Group1_st_tn,function(e,a){$("#displayedMetricSelect").val()==a.field&&$.each(a.chartOutfields,function(e,a){t.push(a)})}),t}}function generateRenderer(){require(["esri/map","esri/Color","esri/dijit/Legend","esri/layers/LayerDrawingOptions","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,a,r,l,i,o,d,n,s,c,u,b){function p(e){var t=app.map.getLayer("SparrowRanking").visibleLayers[0];console.log("sparrowId: ",t);var a=app.map.getLayer("SparrowRanking");console.log("in applyRenderer() ",a);var l=[],i=new r;i.renderer=e,l[t]=i,console.log(l),a.setLayerDrawingOptions(l),app.hasOwnProperty("legend")?app.legend.refresh([{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]):y()}function m(e){console.log("generateRenderer Err ",e)}function y(){app.legend=new a({map:app.map,layerInfos:[{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]},c.byId("legendDiv")),app.legend.startup()}console.log("in generateRenderer()");var h=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions){var f=app.map.getLayer("SparrowRanking").layerDefinitions[h];app.layerDef=f}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(),app.layerDef=null;app.Url="https://sparrowtest.wim.usgs.gov/arcgis/rest/services/SparrowTennessee/SparrowTennessee/MapServer/"+h;var _=$("#displayedMetricSelect")[0].value;app.outFields=[_],app.currentAttribute=_;var g=new o;g.classificationField=app.currentAttribute,g.classificationMethod="quantile",g.breakCount=5,g.baseSymbol=new i(i.STYLE_SOLID,new l(l.STYLE_SOLID,new t([168,168,168]),.1));var S=new d;"radio1"==$(".radio input[type='radio']:checked")[0].id?(S.fromColor=t.fromHex("#FFF1DC"),S.toColor=t.fromHex("#632E0E")):(S.fromColor=t.fromHex("#F5EBB8"),S.toColor=t.fromHex("#004120")),S.algorithm="hsv",g.colorRamp=S;var w=new n;w.classificationDefinition=g,w.formatLabel=!0,w.where=app.layerDef;var v=new s(app.Url);console.log("execute Renderer w/ params:  "+w),v.execute(w,p,m)})}var serviceBaseURL="https://sparrowtest.wim.usgs.gov/arcgis/rest/services/SparrowTennessee/SparrowTennessee/MapServer/",chartUnits=" (lb./yr.)",splitLayers=[4,5,6,11,12,13],tableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"GRP_1_NAM",name:"Independent Watershed name (in which HUC10 is nested)"},{field:"GRP_2_NAM",name:"HUC8 (in which HUC10 is nested)"},{field:"GRP_3_NA_1",name:"same as GRP_3_NAM,  from join file"},{field:"GRP_3_DESC",name:"HUC10 Description"},{field:"Area_g3",name:"HUC10 area (mi2), aggregated from individual model catchments (may differ from WBD)"}],stateTableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"ST_GP3_NAM",name:"HUC10/State (combination) ID"},{field:"Area_S3",name:"HUC10 area within the state and the  model area (mi2), aggregated from individual model catchments"},{field:"ST",name:"State"},{field:"GRP_1_NAM",name:"Independent Watershed name (in which HUC10 is nested)"},{field:"GRP_2_NAM",name:"HUC8 (in which HUC10 is nested)"},{field:"GRP_3_NAM",name:"HUC10"},{field:"ST_GP1_NAM",name:"Independent Watershed/State (combination) ID"},{field:"ST_GP2_NAM",name:"HUC8/State (combination) ID"},{field:"ST_gp3_n_1",name:"Join Field"}],Group3=[{field:"dy1_g3_tot",name:"Yield from HUC10 delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy1_g3_sc1",label:"Soil-parent-rock yield from HUC10 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g3_sc2",label:"Mined-land yield from HUC10 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g3_sc3",label:"Manure yield from HUC10 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g3_sc4",label:"Agricultural-land yield from HUC10 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g3_sc5",label:"Urban-land yield from HUC10 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g3_sc6",label:"Wastewater yield from HUC10 delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_g3_tot",name:"Load from HUC10 delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl1_g3_sc1",label:"Soil-parent-rock load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc2",label:"Mined-land load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc3",label:"Manure load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc4",label:"Agricultural-land load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc5",label:"Urban-land load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc6",label:"Wastewater load from HUC10 delivered to downstream model boundary (lb/yr)"}]},{field:"dy3_g3_tot",name:"Yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy3_g3_sc1",label:"Soil-parent-rock yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc2",label:"Mined-land yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc3",label:"Manure yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc4",label:"Agricultural-land yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc5",label:"Urban-land yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc6",label:"Wastewater yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"}]},{field:"dl3_g3_tot",name:"Load from HUC10 delivered to HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl3_g3_sc1",label:"Soil-parent-rock load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc2",label:"Mined-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc3",label:"Manure load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc4",label:"Agricultural-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc5",label:"Urban-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc6",label:"Wastewater load from HUC10 delivered to HUC10 outlet (lb/yr)"}]},{field:"ay_g3_tot",name:"Accumulated yield at HUC10 outlet (lb/yr/acre)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"ay_g3_sc1",label:"Accumulated Soil-parent-rock yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc2",label:"Accumulated Mined-land yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc3",label:"Accumulated Manure yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc4",label:"Accumulated Agricultural-land yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc5",label:"Accumulated Urban-land yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc6",label:"Accumulated Wastewater yield at HUC10 outlet (lb/yr/acre)"}]},{field:"al_g3_tot",name:"Accumulated load at HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"al_g3_sc1",label:"Accumulated Soil-parent-rock load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc2",label:"Accumulated Mined-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc3",label:"Accumulated Manure load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc4",label:"Accumulated Agricultural-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc5",label:"Accumulated Urban-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc6",label:"Accumulated Wastewater load at HUC10 outlet (lb/yr)"}]}],Group2=[{field:"dy1_g2_tot",name:"Yield from HUC8 delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dy1_g2_sc1",label:"Soil-parent-rock yield from HUC8 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g2_sc2",label:"Mined-land yield from HUC8 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g2_sc3",label:"Manure yield from HUC8 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g2_sc4",label:"Agricultural-land yield from HUC8 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g2_sc5",label:"Urban-land yield from HUC8 delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g2_sc6",label:"Wastewater yield from HUC8 delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_g2_tot",name:"Load from HUC8 delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dl1_g2_sc1",label:"Soil-parent-rock load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc2",label:"Mined-land load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc3",label:"Manure load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc4",label:"Agricultural-land load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc5",label:"Urban-land load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc6",label:"Wastewater load from HUC8 delivered to downstream model boundary (lb/yr)"}]},{field:"dy2_g2_tot",name:"Yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dy2_g2_sc1",label:"Soil-parent-rock yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc2",label:"Mined-land yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc3",label:"Manure yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc4",label:"Agricultural-land yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc5",label:"Urban-land yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc6",label:"Wastewater yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"}]},{field:"dl2_g2_tot",name:"Load from HUC8 delivered to HUC8 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dl2_g2_sc1",label:"Soil-parent-rock load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc2",label:"Mined-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc3",label:"Manure load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc4",label:"Agricultural-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc5",label:"Urban-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl1_g2_sc6",label:"Wastewater load from HUC8 delivered to HUC8 outlet (lb/yr)"}]}],Group1=[{field:"dy1_g1_tot",name:"Yield from independent watershed delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dy1_g1_sc1",label:"Soil-parent-rock yield from independent watershed delivered to downstream boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc2",label:"Mined-land yield from independent watershed delivered to downstream boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc3",label:"Manure yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc4",label:"Agricultural-land yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc5",label:"Urban-land yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc6",label:"Wastewater yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_g1_tot",name:"Load from independent watershed delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dl1_g1_sc1",label:"Soil-parent-rock load from independent watershed delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g1_sc2",label:"Mined-land load from independent watershed delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g1_sc3",label:"Manure load from independent watershed delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g1_sc4",label:"Agricultural-land load from independent watershed delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g1_sc5",label:"Urban-land load from independent watershed delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g1_sc6",label:"Wastewater load from independent watershed delivered to downstream model boundary (lb/yr)"}]}],ST=[{field:"dy1_ST_tot",name:"Yield from State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dy1_ST_sc1",label:"Soil-parent-rock yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc2",label:"Mined-land yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc3",label:"Manure yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc4",label:"Agricultural-land yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc5",label:"Urban-land yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc6",label:"Wastewater yield from State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_ST_tot",name:"Load from State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dl1_ST_sc1",label:"Soil-parent-rock load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc2",label:"Mined-land load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc3",label:"Manure load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc4",label:"Agricultural-land load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc5",label:"Urban-land load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc6",label:"Wastewater load from State delivered to downstream model boundary (lb/yr)"}]},{field:"y_ST_tot",name:"Yield from State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"y_ST_sc1",label:"Soil-parent-rock yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc2",label:"Mined-land yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc3",label:"Manure yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc4",label:"Agricultural-land yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc5",label:"Urban-land yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc6",label:"Wastewater yield from State within model area (lb/yr/acre)"}]},{field:"l_ST_tot",name:"Load from State within model area (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"l_ST_sc1",label:"Soil-parent-rock load from State within model area (lb/yr)"},{attribute:"l_ST_sc2",label:"Mined-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc3",label:"Manure load from State within model area (lb/yr)"},{attribute:"l_ST_sc4",label:"Agricultural-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc5",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc6",label:"Wastewater load from State within model area (lb/yr)"}]}],Group3_st=[{field:"dy1_S3_tot",name:"Yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dy1_S3_sc1",label:"Soil-parent-rock yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc2",label:"Mined-land yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc3",label:"Manure yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc4",label:"Agricultural-land yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc5",label:"Urban-land yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"
},{attribute:"dy1_S3_sc6",label:"Wastewater yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_S3_tot",name:"Load from HUC10/State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dl1_S3_sc1",label:"Soil-parent-rock load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc2",label:"Mined-land load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc3",label:"Manure load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc4",label:"Agricultural-land load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc5",label:"Urban-land load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc6",label:"Wastewater load from HUC10/State delivered to downstream model boundary (lb/yr)"}]},{field:"y_S3_tot",name:"Yield from HUC10/State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"y_S3_sc1",label:"Soil-parent-rock yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc2",label:"Mined-land yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc3",label:"Manure yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc4",label:"Agricultural-land yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc5",label:"Urban-land yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc6",label:"Wastewater yield from HUC10/State within model area (lb/yr/acre)"}]},{field:"l_S3_tot",name:"Load from HUC10/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"l_S3_sc1",label:"Soil-parent-rock load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc2",label:"Mined-land load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc3",label:"Manure load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc4",label:"Agricultural-land load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc5",label:"Urban-land load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc6",label:"Wastewater load from HUC10/State within model area (lb/yr)"}]}],Group2_st=[{field:"dy1_S2_tot",name:"Yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dy1_S2_sc1",label:"Soil-parent-rock yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc2",label:"Mined-land yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc3",label:"Manure yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc4",label:"Agricultural-land yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc5",label:"Urban-land yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc6",label:"Wastewater yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_S2_tot",name:"Load from HUC8/State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dl1_S2_sc1",label:"Soil-parent-rock load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc2",label:"Mined-land load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc3",label:"Manure load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc4",label:"Agricultural-land load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc5",label:"Urban-land load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc6",label:"Wastewater load from HUC8/State delivered to downstream model boundary (lb/yr)"}]},{field:"y_S2_tot",name:"Yield from HUC8/State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"y_S2_sc1",label:"Soil-parent-rock yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc2",label:"Mined-land yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc3",label:"Manure yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc4",label:"Agricultural-land yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc5",label:"Urban-land yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc6",label:"Wastewater yield from HUC8/State within model area (lb/yr/acre)"}]},{field:"l_S2_tot",name:"Load from HUC8/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"l_S2_sc1",label:"Soil-parent-rock load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc2",label:"Mined-land load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc3",label:"Manure load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc4",label:"Agricultural-land load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc5",label:"Urban-land load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc6",label:"Wastewater load from HUC8/State within model area (lb/yr)"}]}],Group1_st=[{field:"dy1_S1_tot",name:"Yield from watershed/State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"dy1_S1_sc1",label:"Soil-parent-rock yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc2",label:"Mined-land yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc3",label:"Manure yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc4",label:"Agricultural-land yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc5",label:"Urban-land yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc6",label:"Wastewater yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_S1_tot",name:"Load from watershed/State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"dl1_S1_sc1",label:"Soil-parent-rock load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc2",label:"Mined-land load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc3",label:"Manure load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc4",label:"Agricultural-land load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc5",label:"Urban-land load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc6",label:"Wastewater load from watershed/State delivered to downstream model boundary (lb/yr)"}]},{field:"y_S1_tot",name:"Yield from watershed/State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"y_S1_sc1",label:"Soil-parent-rock yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc2",label:"Mined-land yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc3",label:"Manure yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc4",label:"Agricultural-land yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc5",label:"Urban-land yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc6",label:"Wastewater yield from watershed/State within model area (lb/yr/acre)"}]},{field:"l_S1_tot",name:"Load from watershed/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independend Watershed/State"},{attribute:"l_S1_sc1",label:"Soil-parent-rock load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc2",label:"Mined-land load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc3",label:"Manure load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc4",label:"Agricultural-land load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc5",label:"Urban-land load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc6",label:"Wastewater load from watershed/State within model area (lb/yr)"}]}],Group3_tn=[{field:"dy1_g3_tot",name:"Yield from HUC10 delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy1_g3_sc1",label:"Atmospheric deposition yield from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g3_sc2",label:"Manure yield from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g3_sc3",label:"Fertilizer yield from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g3_sc4",label:"Urban-land yield from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g3_sc5",label:"Wastewater yield from HUC10 delivered to downstream model boundary (lb/yr)"}]},{field:"dl1_g3_tot",name:"Load from HUC10 delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl1_g3_sc1",label:"Atmospheric deposition load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc2",label:"Manure load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc3",label:"Fertilizer load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc4",label:"Urban-land load from HUC10 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g3_sc5",label:"Wastewater load from HUC10 delivered to downstream model boundary (lb/yr)"}]},{field:"dy3_g3_tot",name:"Yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dy3_g3_sc1",label:"Atmospheric deposition yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc2",label:"Manure yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc3",label:"Fertilizer yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc4",label:"Urban-land yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"},{attribute:"dy3_g3_sc5",label:"Wastewater yield from HUC10 delivered to HUC10 outlet (lb/yr/acre)"}]},{field:"dl3_g3_tot",name:"Load from HUC10 delivered to HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"dl3_g3_sc1",label:"Atmospheric deposition load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc2",label:"Manure load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc3",label:"Fertilizer load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc4",label:"Urban-land load from HUC10 delivered to HUC10 outlet (lb/yr)"},{attribute:"dl3_g3_sc5",label:"Wastewater load from HUC10 delivered to HUC10 outlet (lb/yr)"}]},{field:"ay_g3_tot",name:"Accumulated yield at HUC10 outlet (lb/yr/acre)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"ay_g3_sc1",label:"Accumulated Atmospheric deposition yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc2",label:"Accumulated Manure yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc3",label:"Accumulated Fertilizer yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc4",label:"Accumulated Urban-land yield at HUC10 outlet (lb/yr/acre)"},{attribute:"ay_g3_sc5",label:"Accumulated Wastewater yield at HUC10 outlet (lb/yr/acre)"}]},{field:"al_g3_tot",name:"Accumulated load at HUC10 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_3_NAM",label:"HUC10 name"},{attribute:"al_g3_sc1",label:"Accumulated Atmospheric deposition load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc2",label:"Accumulated Manure load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc3",label:"Accumulated Fertilizer load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc4",label:"Accumulated Urban-land load at HUC10 outlet (lb/yr)"},{attribute:"al_g3_sc5",label:"Accumulated Wastewater load at HUC10 outlet (lb/yr)"}]}],Group2_tn=[{field:"dy1_g2_tot",name:"Yield from HUC8 delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dy1_g2_sc1",label:"Atmospheric deposition yield from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g2_sc2",label:"Manure yield from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g2_sc3",label:"Fertilizer yield from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g2_sc4",label:"Urban-land yield from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dy1_g2_sc5",label:"Wastewater yield from HUC8 delivered to downstream model boundary (lb/yr)"}]},{field:"dl1_g2_tot",name:"Load from HUC8 delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dl1_g2_sc1",label:"Atmospheric deposition load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc2",label:"Manure load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc3",label:"Fertilizer load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc4",label:"Urban-land load from HUC8 delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_g2_sc5",label:"Wastewater load from HUC8 delivered to downstream model boundary (lb/yr)"}]},{field:"dy2_g2_tot",name:"Yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dy2_g2_sc1",label:"Atmospheric deposition yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc2",label:"Manure yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc3",label:"Fertilizer yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc4",label:"Urban-land yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"},{attribute:"dy2_g2_sc5",label:"Wastewater yield from HUC8 delivered to HUC8 outlet (lb/yr/acre)"}]},{field:"dl2_g2_tot",name:"Load from HUC8 delivered to HUC8 outlet (lb/yr)",chartOutfields:[{attribute:"GRP_2_NAM",label:"HUC8 name"},{attribute:"dl2_g2_sc1",label:"Atmospheric deposition load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc2",label:"Manure load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc3",label:"Fertilizer load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc4",label:"Urban-land load from HUC8 delivered to HUC8 outlet (lb/yr)"},{attribute:"dl2_g2_sc5",label:"Wastewater load from HUC8 delivered to HUC8 outlet (lb/yr)"}]}],Group1_tn=[{field:"dy1_g1_tot",name:"Yield from independent watershed delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dy1_g1_sc1",label:"Atmospheric deposition yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc2",label:"Manure yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc3",label:"Fertilizer yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc4",label:"Urban-land yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_g1_sc5",label:"Wastewater yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_g1_tot",name:"Load from independent watershed delivered to downstream boundary (lb/yr)",chartOutfields:[{attribute:"GRP_1_NAM",label:"Independent Watershed name"},{attribute:"dl1_g1_sc1",label:"Wastewater load from independent watershed delivered to downstream boundary (lb/yr)"},{attribute:"dl1_g1_sc2",label:"Manure yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dl1_g1_sc3",label:"Fertilizer yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dl1_g1_sc4",label:"Urban-land yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dl1_g1_sc5",label:"Wastewater yield from independent watershed delivered to downstream model boundary (lb/yr/acre)"}]}],ST_tn=[{field:"dy1_ST_tot",name:"Yield from State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dy1_ST_sc1",label:"Atmospheric-deposition yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc2",label:"Manure yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc3",label:"Agricultural-land yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc4",label:"Urban-land yield from State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_ST_sc5",label:"Wastewater yield from State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_ST_tot",name:"Load from State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"dl1_ST_sc1",label:"Atmospheric-deposition load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc2",label:"Manure load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc3",label:"Fertilizer load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc4",label:"Urban-land load from State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_ST_sc5",label:"Wastewater load from State delivered to downstream model boundary (lb/yr)"}]},{field:"y_ST_tot",name:"Yield from State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"y_ST_sc1",label:"Atmospheric-deposition yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc2",label:"Manure yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc3",label:"Fertilizer yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc4",label:"Urban-land yield from State within model area (lb/yr/acre)"},{attribute:"y_ST_sc5",label:"Wastewater yield from State within model area (lb/yr/acre)"}]},{field:"l_ST_tot",name:"Load from State within model area (lb/yr)",chartOutfields:[{attribute:"ST",label:"State"},{attribute:"l_ST_sc1",label:"Atmospheric-deposition load from State within model area (lb/yr)"},{attribute:"l_ST_sc2",label:"Manure load from State within model area (lb/yr)"},{attribute:"l_ST_sc3",label:"Fertilizer load from State within model area (lb/yr)"},{attribute:"l_ST_sc4",label:"Urban-land load from State within model area (lb/yr)"},{attribute:"l_ST_sc5",label:"Wastewater load from State within model area (lb/yr)"}]}],Group3_st_tn=[{field:"dy1_S3_tot",name:"Yield from HUC10/State delivered to downstream boundary (lb/yr/mi2)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dy1_S3_sc1",label:"Atmospheric-deposition yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc2",label:"Manure yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc3",label:"Fertilizer yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc4",label:"Urban-land yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S3_sc5",label:"Wastewater yield from HUC10/State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_S3_tot",name:"Load from HUC10/State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"dl1_S3_sc1",label:"Atmospheric-deposition load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc2",label:"Manure load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc3",label:"Fertilizer load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc4",label:"Urban-land load from HUC10/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S3_sc5",label:"Wastewater load from HUC10/State delivered to downstream model boundary (lb/yr)"}]},{field:"y_S3_tot",name:"Yield from HUC10/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"y_S3_sc1",label:"Atmospheric-deposition yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc2",label:"Manure yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc3",label:"Fertilizer yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc4",label:"Urban-land yield from HUC10/State within model area (lb/yr/acre)"},{attribute:"y_S3_sc5",label:"Wastewater yield from HUC10/State within model area (lb/yr/acre)"}]},{field:"l_S3_tot",name:"Load from HUC10/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP3_NAM",label:"HUC10/State"},{attribute:"l_S3_sc1",label:"Atmospheric-deposition load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc2",label:"Manure load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc3",label:"Fertilizer load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc4",label:"Urban-land load from HUC10/State within model area (lb/yr)"},{attribute:"l_S3_sc5",label:"Wastewater load from HUC10/State within model area (lb/yr)"}]}],Group2_st_tn=[{field:"dy1_S2_tot",name:"Yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dy1_S2_sc1",label:"Atmospheric-deposition yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc2",label:"Manure yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc3",label:"Fertilizer yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc4",label:"Urban-land yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S2_sc5",label:"Wastewater yield from HUC8/State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_S2_tot",name:"Load from HUC8/State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"dl1_S2_sc1",label:"Atmospheric-deposition load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc2",label:"Manure load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc3",label:"Fertilizer load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc4",label:"Urban-land load from HUC8/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S2_sc5",label:"Wastewater load from HUC8/State delivered to downstream model boundary (lb/yr)"}]},{field:"y_S2_tot",name:"Yield from HUC8/State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"y_S2_sc1",label:"Atmospheric-deposition yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc2",label:"Manure yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc3",label:"Fertilizer yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc4",label:"Urban-land yield from HUC8/State within model area (lb/yr/acre)"},{attribute:"y_S2_sc5",label:"Wastewater yield from HUC8/State within model area (lb/yr/acre)"}]},{field:"l_S2_tot",name:"Load from HUC8/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP2_NAM",label:"HUC8/State"},{attribute:"l_S2_sc1",label:"Atmospheric-deposition load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc2",label:"Manure load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc3",label:"Fertilizer load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc4",label:"Urban-land load from HUC8/State within model area (lb/yr)"},{attribute:"l_S2_sc5",label:"Wastewater load from HUC8/State within model area (lb/yr)"}]}],Group1_st_tn=[{field:"dy1_S1_tot",name:"Yield from watershed/State delivered to downstream model boundary (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independent Watershed/State"},{attribute:"dy1_S1_sc1",label:"Atmospheric-deposition yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc2",label:"Manure yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc3",label:"Agricultural-land yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc4",label:"Urban-land yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dy1_S1_sc5",label:"Wastewater yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"}]},{field:"dl1_S1_tot",name:"Load from watershed/State delivered to downstream model boundary (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independent Watershed/State"},{attribute:"dl1_S1_sc1",label:"Atmospheric-deposition load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc2",label:"Fertilizer load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc3",label:"Agricultural-land yield from watershed/State delivered to downstream model boundary (lb/yr/acre)"},{attribute:"dl1_S1_sc4",label:"Urban-land load from watershed/State delivered to downstream model boundary (lb/yr)"},{attribute:"dl1_S1_sc5",label:"Wastewater load from watershed/State delivered to downstream model boundary (lb/yr)"}]},{field:"y_S1_tot",name:"Yield from watershed/State within model area (lb/yr/acre)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independent Watershed/State"},{attribute:"y_S1_sc1",label:"Atmospheric-deposition yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc2",label:"Manure yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc3",label:"Fertilizer yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc4",label:"Urban-land yield from watershed/State within model area (lb/yr/acre)"},{attribute:"y_S1_sc5",label:"Wastewater yield from watershed/State within model area (lb/yr/acre)"}]},{field:"l_S1_tot",name:"Load from watershed/State within model area (lb/yr)",chartOutfields:[{attribute:"ST_GP1_NAM",label:"Independent Watershed/State"},{attribute:"l_S1_sc1",label:"Atmospheric-deposition load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc2",label:"Manure load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc3",label:"Fertilizer load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc4",label:"Urban-land load from watershed/State within model area (lb/yr)"},{attribute:"l_S1_sc5",label:"Wastewater load from watershed/State within model area (lb/yr)"}]}],queryParameters={grp3:{idField:"GRP_3_NUM",nameField:["GRP_3_NAM","GRP_2_NAM","GRP_1_NAM","ST"],alias:"HUC10",serviceId:4,AOISelect:!1},grp2:{idField:"GRP_2_NUM",nameField:["GRP_2_NAM"],alias:"HUC8",serviceId:1,AOISelect:!0},grp1:{idField:"GRP_1_NUM",nameField:["GRP_1_NAM"],alias:"Independent Watershed",serviceId:2,AOISelect:!0},st:{idField:"ST",nameField:["ST"],alias:"State",serviceId:3,AOISelect:!0}},allLayers;require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","dojo/domReady!"],function(e,t,a){var r;r=1==$("#radio1")[0].checked?0:1,allLayers=[{groupHeading:"Nutrient Model",showGroupHeading:!0,includeInLayerList:!0,layers:{"Nutrient Model Results Overlay":{url:serviceBaseURL,visibleLayers:[r],options:{id:"SparrowRanking",opacity:.75,visible:!0},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Model Calibration Sites",showGroupHeading:!0,includeInLayerList:!0,layers:{"Phosphorus Calibration Sites":{url:serviceBaseURL,visibleLayers:[14],options:{id:"phosCalibration",opacity:.85,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!0}},"Nitrogen Calibration Sites":{url:serviceBaseURL,visibleLayers:[15],options:{id:"nitroCalibration",visible:!1,opacity:.85},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Auxilliary Layers",showGroupHeading:!0,includeInLayerList:!0,layers:{"Tennessee Mainstems":{url:serviceBaseURL,visibleLayers:[17],options:{id:"mainstems",opacity:.75,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!0}},"Tennessee Streams":{url:serviceBaseURL,visibleLayers:[16],options:{id:"streams",visible:!1,opacity:.6},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}}]}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){"use strict";function t(t,a,r,l,o){var d,n,s,c=(t.options.exporting||{}).csv||{},u=c.url||"http://www.highcharts.com/studies/csv-export/download.php";s=t.options.exporting.filename?t.options.exporting.filename:t.title?t.title.textStr.replace(/ /g,"-").toLowerCase():"chart",window.Blob&&window.navigator.msSaveOrOpenBlob?(n=new Blob([l]),window.navigator.msSaveOrOpenBlob(n,s+"."+r)):i?(d=document.createElement("a"),d.href=a,d.target="_blank",d.download=s+"."+r,t.container.append(d),d.click(),d.remove()):e.post(u,{data:l,type:o,extension:r})}var a=e.each,r=e.pick,l=e.seriesTypes,i=void 0!==document.createElement("a").download;e.setOptions({lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",viewData:"View data table"}}),e.Chart.prototype.getDataRows=function(){var t,l,i,o,d,n=(this.options.exporting||{}).csv||{},s=this.xAxis,c={},u=[],b=[],p=n.dateFormat||"%Y-%m-%d %H:%M:%S",m=n.columnHeaderFormatter||function(t,a,r){return t instanceof e.Axis?t.options.title&&t.options.title.text||(t.isDatetimeAxis?"DateTime":"Category"):t?t.name+(r>1?" ("+a+")":""):"Category"},y=[];i=0,a(this.series,function(t){var l,o=t.options.keys,d=o||t.pointArrayMap||["y"],n=d.length,u=t.requireSorting,p={},h=e.inArray(t.xAxis,s);if(a(d,function(e){p[e]=t[e+"Axis"]&&t[e+"Axis"].categories||[]}),t.options.includeInCSVExport!==!1&&t.visible!==!1){for(e.find(y,function(e){return e[0]===h})||y.push([h,i]),l=0;n>l;)b.push(m(t,d[l],d.length)),l+=1;a(t.points,function(e,a){var o,s,b=u?e.x:a;for(l=0,c[b]||(c[b]=[],c[b].xValues=[]),c[b].x=e.x,c[b].xValues[h]=e.x,t.xAxis&&"name"!==t.exportKey||(c[b].name=e.name);n>l;)o=d[l],s=e[o],c[b][i+l]=r(p[o][s],s),l+=1}),i+=l}});for(o in c)c.hasOwnProperty(o)&&u.push(c[o]);var h,f;for(l=[b],i=y.length;i--;)h=y[i][0],f=y[i][1],t=s[h],u.sort(function(e,t){return e.xValues[h]-t.xValues[h]}),d=m(t),l[0].splice(f,0,d),a(u,function(a){var l=a.name;l||(t.isDatetimeAxis?(a.x instanceof Date&&(a.x=a.x.getTime()),l=e.dateFormat(p,a.x)):l=t.categories?r(t.names[a.x],t.categories[a.x],a.x):a.x),
a.splice(f,0,l)});return l=l.concat(u)},e.Chart.prototype.getCSV=function(e){var t="",r=this.getDataRows(),l=(this.options.exporting||{}).csv||{},i=l.itemDelimiter||",",o=l.lineDelimiter||"\n";return a(r,function(a,l){for(var d="",n=a.length,s=e?1.1.toLocaleString()[1]:".";n--;)d=a[n],"string"==typeof d&&(d='"'+d+'"'),"number"==typeof d&&","===s&&(d=d.toString().replace(".",",")),a[n]=d;t+=a.join(i),l<r.length-1&&(t+=o)}),t},e.Chart.prototype.getTable=function(e){var t="<table><thead>",r=this.getDataRows();return a(r,function(a,r){var l,i,o=r?"td":"th",d=e?1.1.toLocaleString()[1]:".";for(t+="<tr>",i=0;i<a.length;i+=1)l=a[i],"number"==typeof l?(l=l.toString(),","===d&&(l=l.replace(".",d)),t+="<"+o+' class="number">'+l+"</"+o+">"):t+="<"+o+">"+(void 0===l?"":l)+"</"+o+">";t+="</tr>",r||(t+="</thead><tbody>")}),t+="</tbody></table>"},e.Chart.prototype.downloadCSV=function(){var e=this.getCSV(!0);t(this,"data:text/csv,\ufeff"+encodeURIComponent(e),"csv",e,"text/csv")},e.Chart.prototype.downloadXLS=function(){var e="data:application/vnd.ms-excel;base64,",a='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>",r=function(e){return window.btoa(unescape(encodeURIComponent(e)))};t(this,e+r(a),"xls",a,"application/vnd.ms-excel")},e.Chart.prototype.viewData=function(){this.dataTableDiv||(this.dataTableDiv=document.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv.innerHTML=this.getTable()},e.getOptions().exporting&&e.getOptions().exporting.buttons.contextButton.menuItems.push({textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},{textKey:"viewData",onclick:function(){this.viewData()}}),l.map&&(l.map.prototype.exportKey="name"),l.mapbubble&&(l.mapbubble.prototype.exportKey="name")}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){!function(e){var t=e.defaultOptions,a=e.doc,r=e.Chart,l=e.addEvent,i=e.removeEvent,o=e.fireEvent,d=e.createElement,n=e.discardElement,s=e.css,c=e.merge,u=e.pick,b=e.each,p=e.objectEach,m=e.extend,y=e.isTouchDevice,h=e.win,f=h.navigator.userAgent,_=e.Renderer.prototype.symbols;/Edge\/|Trident\/|MSIE /.test(f),/firefox/i.test(f),m(t.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),t.navigation={buttonOptions:{theme:{},symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24}},c(!0,t.navigation,{menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",background:"none",color:"#333333",fontSize:y?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"},buttonOptions:{symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",stroke:"none",padding:5}}}),t.exporting={type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:"printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},e.post=function(e,t,r){var l=d("form",c({method:"post",action:e,enctype:"multipart/form-data"},r),{display:"none"},a.body);p(t,function(e,t){d("input",{type:"hidden",name:t,value:e},null,l)}),l.submit(),n(l)},m(r.prototype,{sanitizeSVG:function(e,t){if(t&&t.exporting&&t.exporting.allowHTML){var a=e.match(/<\/svg>(.*?$)/);a&&a[1]&&(a='<foreignObject x="0" y="0" width="'+t.chart.width+'" height="'+t.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+a[1]+"</body></foreignObject>",e=e.replace("</svg>",a+"</svg>"))}return e=e.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(\S+)("|&quot;)\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­"),e=e.replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(t){var r,l,i,o,s,u=c(this.options,t);return a.createElementNS||(a.createElementNS=function(e,t){return a.createElement(t)}),l=d("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},a.body),i=this.renderTo.style.width,s=this.renderTo.style.height,i=u.exporting.sourceWidth||u.chart.width||/px$/.test(i)&&parseInt(i,10)||600,s=u.exporting.sourceHeight||u.chart.height||/px$/.test(s)&&parseInt(s,10)||400,m(u.chart,{animation:!1,renderTo:l,forExport:!0,renderer:"SVGRenderer",width:i,height:s}),u.exporting.enabled=!1,delete u.data,u.series=[],b(this.series,function(e){o=c(e.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible}),o.isInternal||u.series.push(o)}),b(this.axes,function(t){t.userOptions.internalKey||(t.userOptions.internalKey=e.uniqueKey())}),r=new e.Chart(u,this.callback),t&&b(["xAxis","yAxis","series"],function(e){var a={};t[e]&&(a[e]=t[e],r.update(a))}),b(this.axes,function(t){var a=e.find(r.axes,function(e){return e.options.internalKey===t.userOptions.internalKey}),l=t.getExtremes(),i=l.userMin,l=l.userMax;!a||void 0===i&&void 0===l||a.setExtremes(i,l,!0,!1)}),i=r.getChartHTML(),i=this.sanitizeSVG(i,u),u=null,r.destroy(),n(l),i},getSVGForExport:function(e,t){var a=this.options.exporting;return this.getSVG(c({chart:{borderRadius:0}},a.chartOptions,t,{exporting:{sourceWidth:e&&e.sourceWidth||a.sourceWidth,sourceHeight:e&&e.sourceHeight||a.sourceHeight}}))},exportChart:function(t,a){a=this.getSVGForExport(t,a),t=c(this.options.exporting,t),e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale,svg:a},t.formAttributes)},print:function(){var e,t,r=this,l=r.container,i=[],d=l.parentNode,n=a.body,s=n.childNodes,c=r.options.exporting.printMaxWidth;r.isPrinting||(r.isPrinting=!0,r.pointer.reset(null,0),o(r,"beforePrint"),(t=c&&r.chartWidth>c)&&(e=[r.options.chart.width,void 0,!1],r.setSize(c,void 0,!1)),b(s,function(e,t){1===e.nodeType&&(i[t]=e.style.display,e.style.display="none")}),n.appendChild(l),h.focus(),h.print(),setTimeout(function(){d.appendChild(l),b(s,function(e,t){1===e.nodeType&&(e.style.display=i[t])}),r.isPrinting=!1,t&&r.setSize.apply(r,e),o(r,"afterPrint")},1e3))},contextMenu:function(t,r,i,o,n,c,u){var p,y,h=this,f=h.options.navigation,_=h.chartWidth,g=h.chartHeight,S="cache-"+t,w=h[S],v=Math.max(n,c);w||(h[S]=w=d("div",{className:t},{position:"absolute",zIndex:1e3,padding:v+"px"},h.container),p=d("div",{className:"highcharts-menu"},null,w),s(p,m({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},f.menuStyle)),y=function(){s(w,{display:"none"}),u&&u.setState(0),h.openMenu=!1},h.exportEvents.push(l(w,"mouseleave",function(){w.hideTimer=setTimeout(y,500)}),l(w,"mouseenter",function(){clearTimeout(w.hideTimer)}),l(a,"mouseup",function(e){h.pointer.inClass(e.target,t)||y()})),b(r,function(t){if("string"==typeof t&&(t=h.options.exporting.menuItemDefinitions[t]),e.isObject(t,!0)){var a;t.separator?a=d("hr",null,null,p):(a=d("div",{className:"highcharts-menu-item",onclick:function(e){e&&e.stopPropagation(),y(),t.onclick&&t.onclick.apply(h,arguments)},innerHTML:t.text||h.options.lang[t.textKey]},null,p),a.onmouseover=function(){s(this,f.menuItemHoverStyle)},a.onmouseout=function(){s(this,f.menuItemStyle)},s(a,m({cursor:"pointer"},f.menuItemStyle))),h.exportDivElements.push(a)}}),h.exportDivElements.push(p,w),h.exportMenuWidth=w.offsetWidth,h.exportMenuHeight=w.offsetHeight),r={display:"block"},i+h.exportMenuWidth>_?r.right=_-i-n-v+"px":r.left=i-v+"px",o+c+h.exportMenuHeight>g&&"top"!==u.alignOptions.verticalAlign?r.bottom=g-o-v+"px":r.top=o+c-v+"px",s(w,r),h.openMenu=!0},addButton:function(e){var t,a,r=this,l=r.renderer,i=c(r.options.navigation.buttonOptions,e),o=i.onclick,d=i.menuItems,n=i.symbolSize||12;if(r.btnCount||(r.btnCount=0),r.exportDivElements||(r.exportDivElements=[],r.exportSVGElements=[]),!1!==i.enabled){var s,b=i.theme,p=b.states,y=p&&p.hover,p=p&&p.select;delete b.states,o?s=function(e){e.stopPropagation(),o.call(r,e)}:d&&(s=function(){r.contextMenu(a.menuClassName,d,a.translateX,a.translateY,a.width,a.height,a),a.setState(2)}),i.text&&i.symbol?b.paddingLeft=u(b.paddingLeft,25):i.text||m(b,{width:i.width,height:i.height,padding:0}),a=l.button(i.text,0,0,s,b,y,p).addClass(e.className).attr({"stroke-linecap":"round",title:r.options.lang[i._titleKey],zIndex:3}),a.menuClassName=e.menuClassName||"highcharts-menu-"+r.btnCount++,i.symbol&&(t=l.symbol(i.symbol,i.symbolX-n/2,i.symbolY-n/2,n,n).addClass("highcharts-button-symbol").attr({zIndex:1}).add(a),t.attr({stroke:i.symbolStroke,fill:i.symbolFill,"stroke-width":i.symbolStrokeWidth||1})),a.add().align(m(i,{width:a.width,x:u(i.x,r.buttonOffset)}),!0,"spacingBox"),r.buttonOffset+=(a.width+i.buttonSpacing)*("right"===i.align?-1:1),r.exportSVGElements.push(a,t)}},destroyExport:function(e){var t=e?e.target:this;e=t.exportSVGElements;var a,r=t.exportDivElements,l=t.exportEvents;e&&(b(e,function(e,r){e&&(e.onclick=e.ontouchstart=null,a="cache-"+e.menuClassName,t[a]&&delete t[a],t.exportSVGElements[r]=e.destroy())}),e.length=0),r&&(b(r,function(e,a){clearTimeout(e.hideTimer),i(e,"mouseleave"),t.exportDivElements[a]=e.onmouseout=e.onmouseover=e.ontouchstart=e.onclick=null,n(e)}),r.length=0),l&&(b(l,function(e){e()}),l.length=0)}}),_.menu=function(e,t,a,r){return["M",e,t+2.5,"L",e+a,t+2.5,"M",e,t+r/2+.5,"L",e+a,t+r/2+.5,"M",e,t+r-1.5,"L",e+a,t+r-1.5]},r.prototype.renderExporting=function(){var e=this,t=e.options.exporting,a=t.buttons,r=e.isDirtyExporting||!e.exportSVGElements;e.buttonOffset=0,e.isDirtyExporting&&e.destroyExport(),r&&!1!==t.enabled&&(e.exportEvents=[],p(a,function(t){e.addButton(t)}),e.isDirtyExporting=!1),l(e,"destroy",e.destroyExport)},r.prototype.callbacks.push(function(e){e.renderExporting(),l(e,"redraw",e.renderExporting),b(["exporting","navigation"],function(t){e[t]={update:function(a,r){e.isDirtyExporting=!0,c(!0,e.options[t],a),u(r,!0)&&e.redraw()}}})})}(e)});var app={};require(["esri/arcgis/utils","esri/map","esri/tasks/QueryTask","esri/tasks/query","esri/Color","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/layers/WMSLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Extent","esri/geometry/Multipoint","esri/geometry/Point","esri/layers/LayerDrawingOptions","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference","dojo/parser","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,a,r,l,i,o,d,n,s,c,u,b,p,m,y,h,f,_,g,S,w,v,C,U,H,x,A,M,k,T,O,L,G,I,R){function P(e,t,a){var r;r=new esri.tasks.QueryTask(e);var l=new esri.tasks.Query;l.returnGeometry=!1,l.outFields=t,l.where=a,"https://sparrowtest.wim.usgs.gov/arcgis/rest/services/SparrowTennessee/SparrowTennessee/MapServer/1"==e?r.execute(l,D):r.execute(l,N)}function D(e){$.each(e.features,function(e,t){J.push(t.attributes)})}function N(e){$.each(e.features,function(e,t){X.push(t.attributes)}),W()}function W(){var e=ee(X,"GRP_2_NAM"),t=ee(X,"GRP_1_NAM"),a=ee(X,"ST");console.log("ST options: "+a),console.log("grp1 options: "+t),console.log("grp1 options: "+e),$.each(e,function(e,t){var a=J.filter(function(e){return e.GRP_2_NAM===t})[0].GRP_2_DESC;$("#grp2-select").append('<option value="'+t+'">'+t+" - "+a+"</option>")}),$.each(t,function(e,t){$("#grp1-select").append(new Option(t))}),$.each(a,function(e,t){$("#st-select").append(new Option(t))}),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#st-select").selectpicker("refresh")}function F(e){app.clearFindGraphics();var t=e.graphic?e.graphic:e.result.feature;t.setSymbol(te)}function E(e){if(e=e.results,e.length>0){app.clearFindGraphics();for(var t=0;t<e.length;t++);var a=new h(e[0].feature.geometry);app.map.centerAndZoom(a,17)}}function z(e,t,a,r,l){return new _({angle:0,xoffset:t,yoffset:a,type:"esriPMS",url:e,contentType:"image/png",width:r,height:l})}function B(e){function t(){var e=$("#groupResultsSelect")[0].selectedIndex;switch(e){case 0:return"HUC10";case 1:return"HUC8";case 2:return"Independent Watershed";case 3:return"State"}}function a(){var e,t=app.map.getLayer("SparrowRanking").visibleLayers[0];switch(t){case 0:$.each(Group3,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 1:$.each(Group2,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 2:$.each(Group1,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 3:$.each(ST,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 4:$.each(Group3_st,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 5:$.each(Group2_st,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 6:$.each(Group1_st,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 7:$.each(Group3_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 8:$.each(Group2_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 9:$.each(Group1_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 10:$.each(ST_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 11:$.each(Group3_st_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 12:$.each(Group2_st_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)});break;case 13:$.each(Group1_st_tn,function(t,a){a.field==$("#displayedMetricSelect").val()&&(e=a.name)})}return e}var r=[],i=[],o=[],d=[],n=[];$.each(e.features,function(e,t){n.push(t.attributes)});var s=0;$.each(n,function(e,t){$.each(t,function(e,t){"string"!==jQuery.type(t)&&(s+=t)}),t.total=s,s=0}),n.sort(function(e,t){return parseFloat(t.total)-parseFloat(e.total)}),console.log("featureSort",n),$.each(e.features[0].attributes,function(e,t){i.push(e)}),i.pop(),$.each(i,function(e,t){var a=[];$.each(n,function(e,r){a.push(r[t])}),o.push(a)}),i.shift(),r=o.shift();var c=app.map.getLayer("SparrowRanking").visibleLayers[0],u=getChartOutfields(c),b=[];$.each(u,function(e,t){b.push(t.label)}),b.shift(),$.each(b,function(e,t){d.push({name:t})}),$.each(o,function(e,t){d[e].data=o[e]}),$("#chartWindowDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,reload:!1,editTitle:!1,draggable:!0,minWidth:800,minHeight:800,maxHeight:1e3}),$("#chartWindowDiv").addClass("chartWindowMaximize"),$("#chartWindowDiv").removeClass("chartWindowMinimize"),$("#chartWindowDiv").css("visibility","visible"),"radio1"==$('.radio input[type="radio"]:checked')[0].id?$("#chartWindowPanelTitle").text("Phosphorus "+a()):$("#chartWindowPanelTitle").text("Nitrogen "+a()),e.features.length<=1&&$("#chartWindowPanelTitle").append('<br/><div class="btn"><button type="button" class="btn btn-primary" id="popupChartButton"><span class="glyphicon glyphicon-signal"></span> Show Full Chart</button></div>'),0==$("#chartClose").length&&$("#chartWindowDiv .dropdown").prepend('<div id="chartClose" title="close"><b>X</b></div>'),$("#popupChartButton").on("click",function(){app.createChartQuery()});var p=$("#chartWindowDiv").data("lobiPanel");p.unpin();var m=p.getPosition().x;p.setPosition(m,50),$("#chartClose").on("click",function(){app.map.graphics.clear(),$("#chartWindowDiv").css("visibility","hidden"),$("#chartWindowContainer").empty(),$("#chartWindowPanelTitle").empty(),$("#tableButton").prop("disabled",!1)}),$("#chartWindowDiv").resize(function(){var e=$("#chartWindowDiv").height(),t=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(t-50,e-75,!0)});var y="radio1"==$('.radio input[type="radio"]:checked')[0].id?["#0070C0","#97DA7C","#663100","#FFEC99","#FFCCFF","#BF0000"]:["#0070C0","#663100","#FFEC99","#FFCCFF","#BF0000"];$("#chartWindowContainer").highcharts();$(function(){Highcharts.setOptions({lang:{thousandsSep:","},colors:y}),$("#chartWindowContainer").highcharts({chart:{type:"column",zoomType:"x",backgroundColor:"rgba(255, 255, 255, 0.45)",events:{selection:function(e){function t(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_GP3_NAM":"GRP_3_NAM";case 1:return $("#st-select")[0].selectedIndex>0?"ST_GP2_NAM":"GRP_2_NAM";case 2:return $("#st-select")[0].selectedIndex>0?"ST_GP1_NAM":"GRP_1_NAM";case 3:return"ST"}}function a(e){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)}),$.each(e.features,function(e,t){var t=t,a=new g(g.STYLE_SOLID,new l([255,255,0]),1);a.id="zoomHighlight",t.setSymbol(a),app.map.graphics.add(t)})}var r=[];if(e.xAxis){var i=e.xAxis[0];i&&$.each(this.series,function(e,t){$.each(t.points,function(e,t){t.x>=i.min&&t.x<=i.max&&-1==r.indexOf(t.category)&&r.push(t.category)})}),console.log(r)}if(app.map.graphics.clear(),1!=e.resetSelection){var o="";$.each(r,function(e,t){o+="'"+t+"', "});var d,n=o.slice(0,o.length-2),s=app.map.getLayer("SparrowRanking").visibleLayers[0],c=app.map.getLayer("SparrowRanking").url,u=t($("#groupResultsSelect")[0].selectedIndex);d=new esri.tasks.QueryTask(c+s.toString());var b=new esri.tasks.Query;b.returnGeometry=!0,b.outSpatialReference=app.map.spatialReference,b.outFields=[u],b.where=u+" IN ("+n+")",d.execute(b,a)}}}},title:{text:null},subtitle:{text:null},exporting:{enabled:!0,buttons:{contextButton:{text:"Chart Options",height:40,symbol:null,align:"right",menuItems:[{text:"Download CSV",onclick:function(){this.downloadCSV()}},{text:"Download Excel",onclick:function(){this.downloadXLS()}},{text:"Change Background Transparency",onclick:function(){"rgba(255, 255, 255, .9)"!=this.chartBackground.element.attributes.fill.value?this.chartBackground.attr({fill:"rgba(255, 255, 255, .9)"}):this.chartBackground.attr({fill:"rgba(255, 255, 255, .1)"})}}]}}},xAxis:{categories:r,title:{text:"Ranked by "+t()}},yAxis:{min:0,title:{text:a()},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{align:"left",x:10,verticalAlign:"top",y:0,floating:!1,padding:5,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{formatter:function(){var e=this.point.index+1,r=this.point.y/this.point.stackTotal*100;return"<b>"+t()+": <b>"+this.point.category+"</b></b><br/>"+this.series.name+": <b>"+this.point.y.toFixed(2)+" ("+r.toFixed(2)+"%)</b></b><br/>"+a()+" Total: <b>"+this.point.stackTotal.toFixed(2)+"</b></b><br/>Rank: <b>"+e+"</b>"}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}},series:{point:{events:{mouseOver:function(){function e(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_GP3_NAM":"GRP_3_NAM";case 1:return $("#st-select")[0].selectedIndex>0?"ST_GP2_NAM":"GRP_2_NAM";case 2:return $("#st-select")[0].selectedIndex>0?"ST_GP1_NAM":"GRP_1_NAM";case 3:return"ST"}}function t(e){$.each(app.map.graphics.graphics,function(e,t){(void 0==t.symbol.id||"zoomHighlight"!==t.symbol.id)&&app.map.graphics.remove(t)});var t=e.features[0],a=new S(S.STYLE_SOLID,new g(g.STYLE_SOLID,new l([150,49,37]),2),new l([150,49,37,.33]));t.setSymbol(a),app.map.graphics.add(t)}var a,r=this.category,i=app.map.getLayer("SparrowRanking").visibleLayers[0],o=app.map.getLayer("SparrowRanking").url,d=e($("#groupResultsSelect")[0].selectedIndex);a=new esri.tasks.QueryTask(o+i.toString());var n=new esri.tasks.Query;n.returnGeometry=!0,n.outSpatialReference=app.map.spatialReference,n.outFields=[d],n.where=d+"= '"+r+"'",a.execute(n,t)},click:function(e){function t(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_GP3_NAM":"GRP_3_NAM";case 1:return $("#st-select")[0].selectedIndex>0?"ST_GP2_NAM":"GRP_2_NAM";case 2:return $("#st-select")[0].selectedIndex>0?"ST_GP1_NAM":"GRP_1_NAM";case 3:return"ST"}}var a=t($("#groupResultsSelect")[0].selectedIndex),r=a+" = '"+this.category+"'";app.map.graphics.clear(),app.createChartQuery(r)}}}}},credits:{enabled:!1},series:d}),$(".highcharts-button-box").click(function(){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)})})})}function j(e){var t=($("#resultsTable"),app.map.getLayer("SparrowRanking").visibleLayers[0]);switch($("#tableTitle").empty(),t){case 0:$("#tableTitle").html("Phosphorus");break;case 4:$("#tableTitle").html("Phosphorus Split by State");break;case 7:$("#tableTitle").html("Nitrogen");break;case 11:$("#tableTitle").html("Nitrogen Split by State")}$("#resultsTable").append("<thead></thead>");var a=[];$.each(e.features[0].attributes,function(e,t){a.push(e)});var r="";r=getTableFields(a,t),$("#resultsTable").find("thead").html(r);var l=[];$("#resultsTable").append('<tbody id="tableBody"></tbody>'),$.each(e.features,function(e,t){l.push("<tr id='row"+e+"'>"),$.each(t.attributes,function(e,t){l.push("<td>"+t+"</td>")}),l.push("</tr>")}),$("#tableBody").html(l.join("")),$("#tableResizable").show();var i=$("#resultsTable").width();$(".ui-widget-header").css("width",i),$(".ui-resizable-handle").css("width",i)}function V(){$("#geosearchModal").modal("show")}function Y(){$("#aboutModal").modal("show")}function Q(){$("#userGuideModal").modal("show")}function q(){app.createTableQuery()}function Z(){$("#tableResizable").hide()}T.parse(),app.dragInfoWindows=!0,app.defaultMapCenter=[-86,36],app.map=t("mapDiv",{basemap:"gray",center:app.defaultMapCenter,zoom:7}),app.home=new i({map:app.map},"homeButton"),app.home.startup(),app.locate=new o({map:app.map},"locateButton"),app.locate.startup(),app.geocoder=new u({value:"",maxLocations:25,autoComplete:!0,arcgisGeocoder:!0,autoNavigate:!1,map:app.map},"geosearch"),app.geocoder.startup(),app.geocoder.on("select",F),app.geocoder.on("findResults",E),app.geocoder.on("clear",app.clearFindGraphics),search_api.create("geosearch_usgs",{on_result:function(e){var t=["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"],a=t.indexOf(e.result.properties.Source);-1==a?app.map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):app.map.centerAndZoom(new h(e.result.properties.Lon,e.result.properties.Lat),12),app.map.infoWindow.setTitle("Search Result"),app.map.infoWindow.setContent($.map(Object.keys(e.result.properties),function(t){return"<b>"+t+": </b>"+e.result.properties[t]}).join("<br/>")),$("#geosearchModal").modal("hide"),app.map.infoWindow.show(new h(e.result.properties.Lon,e.result.properties.Lat))},include_usgs_sw:!0,include_huc2:!0,include_huc4:!0,include_huc6:!0,include_huc8:!0,include_huc12:!0});var K={},X=[],J=[];loadEventHandlers(),P(serviceBaseURL+1,["GRP_2_NAM","GRP_2_DESC"],"1=1"),P(serviceBaseURL+4,["ST","GRP_3_NAM","GRP_2_NAM","GRP_1_NAM"],"1=1"),app.setLayerDefObj=function(e){switch(e.selectedId){case"st-select":K.AOIST=e.selectedValue;break;case"grp1-select":K.AOI1=e.selectedValue;break;case"grp2-select":K.AOI2=e.selectedValue;break;case"grp3-select":K.AOI3=e.selectedValue}app.updateAOIs(e.selectedId)},app.getLayerDefObj=function(){return K},app.clearLayerDefObj=function(){K={},$("#st-select").empty(),$("#grp1-select").empty(),$("#grp2-select").empty(),W()},app.clearOneLayerDefObj=function(e){switch(e){case"AOIST":K.AOIST=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select");break;case"AOI1":K.AOI1=void 0,app.updateAOIs("st-select"),app.updateAOIs("grp2-select");break;case"AOI2":K.AOI2=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("st-select")}};var ee=function(e,t){var a=[];for(var r in e)a.map(function(e){return e}).indexOf(e[r][t])<0&&a.push(e[r][t]);return a.sort()};app.updateAOIs=function(e){var t=[],a=[],r=[],l=[];switch(e){case"st-select":$("#grp1-select").empty(),$("#grp2-select").empty(),t=K.AOI2?X.filter(function(e){return e.ST===K.AOIST&&e.GRP_2_NAM===K.AOI2}):X.filter(function(e){return e.ST===K.AOIST}),0===t.length&&(t=X),r=ee(t,"GRP_1_NAM"),console.log("newWay: "+r),$.each(r,function(e,t){$("#grp1-select").append(new Option(t))}),$("#grp1-select").selectpicker("refresh"),K.AOI1&&$("#grp1-select").selectpicker("val",K.AOI1),t=[],t=K.AOI1?X.filter(function(e){return e.ST===K.AOIST&&e.GRP_1_NAM===K.AOI1}):X.filter(function(e){return e.ST===K.AOIST}),0===t.length&&(t=X),a=ee(t,"GRP_2_NAM"),$.each(a,function(e,t){var a=J.filter(function(e){return e.GRP_2_NAM===t})[0].GRP_2_DESC;$("#grp2-select").append('<option value="'+t+'">'+t+" - "+a+"</option>")}),$("#grp2-select").selectpicker("refresh"),K.AOI2&&$("#grp2-select").selectpicker("val",K.AOI2);break;case"grp1-select":$("#st-select").empty(),$("#grp2-select").empty(),t=K.AOI2?X.filter(function(e){return e.GRP_2_NAM===K.AOI2&&e.GRP_1_NAM===K.AOI1}):X.filter(function(e){return e.GRP_1_NAM===K.AOI1}),0===t.length&&(t=X),l=ee(t,"ST"),$.each(l,function(e,t){$("#st-select").append(new Option(t))}),$("#st-select").selectpicker("refresh"),K.AOIST&&$("#st-select").selectpicker("val",K.AOIST),t=[],t=K.AOIST?X.filter(function(e){return e.GRP_1_NAM==K.AOI1&&e.ST==K.AOIST}):X.filter(function(e){return e.GRP_1_NAM==K.AOI1}),0==t.length&&(t=X),a=ee(t,"GRP_2_NAM"),$.each(a,function(e,t){var a=J.filter(function(e){return e.GRP_2_NAM===t})[0].GRP_2_DESC;$("#grp2-select").append('<option value="'+t+'">'+t+" - "+a+"</option>")}),$("#grp2-select").selectpicker("refresh"),K.AOI2&&$("#grp2-select").selectpicker("val",K.AOI2);break;case"grp2-select":$("#st-select").empty(),$("#grp1-select").empty(),t=K.AOIST?X.filter(function(e){return e.GRP_2_NAM===K.AOI2&&e.ST===K.AOIST}):X.filter(function(e){return e.GRP_2_NAM===K.AOI2}),0===t.length&&(t=X),l=ee(t,"ST"),$.each(l,function(e,t){$("#st-select").append(new Option(t))}),$("#st-select").selectpicker("refresh"),K.AOIST&&($("#st-select").val(K.AOIST),$("#st-select").selectpicker("render")),t=[],t=K.AOIST?X.filter(function(e){return e.GRP_2_NAM===K.AOI2&&e.ST===K.AOIST}):X.filter(function(e){return e.GRP_2_NAM===K.AOI2}),0==t.length&&(t=X),r=ee(t,"GRP_1_NAM"),$.each(r,function(e,t){$("#grp1-select").append(new Option(t))}),$("#grp1-select").selectpicker("refresh"),K.AOI1&&($("#grp1-select").val(K.AOI1),$("#grp1-select").selectpicker("render"));break;case"grp3-select":console.log("currently no filtering setup for AOI3")}},app.initMapScale=function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=M.webMercatorToGeographic(app.map.extent.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))},app.updateMousePosition=function(e){if($("#mapCenterLabel").css("display","none"),null!==e.mapPoint){var t=M.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}},app.updateMapCenter=function(e){$("#mapCenterLabel").css("display","inline");var t=M.webMercatorToGeographic(e.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))},app.setupDraggableInfoWindow=function(){if(app.dragInfoWindows===!0){var e=L(".title",app.map.infoWindow.domNode)[0],t=new O(app.map.infoWindow.domNode,{handle:e});R(t,"FirstMove",function(){var e=L(".outerPointer",app.map.infoWindow.domNode)[0];I.add(e,"hidden");var t=L(".pointer",app.map.infoWindow.domNode)[0];I.add(t,"hidden")}.bind(this))}},app.executeIdentifyTask=function(e){console.log(e);var t=app.map.getLayer("SparrowRanking").visibleLayers[0];app.identifyParams.layerIds=[t];var a,r,l=app.map.getLayersVisibleAtScale();for(a in l)"nitroCalibration"===l[a].id&&app.map.getLayer("nitroCalibration").visible===!0&&(r=app.map.getLayer("nitroCalibration").visibleLayers[0],app.identifyParams.layerIds.push(r)),"phosCalibration"===l[a].id&&app.map.getLayer("phosCalibration").visible===!0&&(r=app.map.getLayer("phosCalibration").visibleLayers[0],app.identifyParams.layerIds.push(r));app.identifyParams.geometry=e.mapPoint,app.identifyParams.mapExtent=app.map.extent;app.identifyTask.execute(app.identifyParams).addCallback(function(t){var a=!1;if(t.length>=1&&($.each(t,function(t,r){if(14===r.layerId){var l="Phosphorus",i=new esri.InfoTemplate;i.setTitle("SPARROW "+l+" Calibration Site"),i.setContent("<div><b>Station Name:</b> "+r.feature.attributes.name+"</div><br><div><b>Station ID:</b> </b>"+r.feature.attributes.staid+"</div><br><div><b>SPARROW Reach ID: </b>"+r.feature.attributes.MRB_ID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+r.feature.attributes.LOAD_A_665+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+r.feature.attributes.PLOAD_665+"</div><br>");new p;r.feature.setInfoTemplate(i),app.map.infoWindow.setFeatures([r.feature]),app.map.infoWindow.show(e.mapPoint),a=!0}if(15===r.layerId){var o="Nitrogen",d=new esri.InfoTemplate;d.setTitle("SPARROW "+o+" Calibration Site"),d.setContent("<div><b>Station Name:</b> "+r.feature.attributes.name+"</div><br><div><b>Station ID:</b> </b>"+r.feature.attributes.staid+"</div><br><div><b>SPARROW Reach ID: </b>"+r.feature.attributes.MRB_ID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+r.feature.attributes.LOAD_A_600+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+r.feature.attributes.PLOAD_600+"</div><br>");new p;r.feature.setInfoTemplate(d),app.map.infoWindow.setFeatures([r.feature]),app.map.infoWindow.show(e.mapPoint),a=!0}}),1!=a)){var r=getChartOutfields(app.map.getLayer("SparrowRanking").visibleLayers[0]),l=(t[0].feature.attributes,t[0].displayFieldName+" = '"+t[0].value+"'");
$.each(r,function(e,t){console.log(t.attribute)}),$("#chartWindowContainer").empty(),app.createChartQuery(l)}})},app.clearFindGraphics=function(){app.map.infoWindow.hide(),app.map.graphics.clear()},app.createTableQuery=function(){$("#resultsTable").empty();var e,t=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions)var a=app.map.getLayer("SparrowRanking").layerDefinitions[t];else var a="1=1";var r=serviceBaseURL+t;e=new esri.tasks.QueryTask(r);var l=new esri.tasks.Query;l.returnGeometry=!1,l.outFields=["*"],l.where=a,e.execute(l,j)},app.createChartQuery=function(e){$("#tableButton").prop("disabled",!0),$("#chartContainer").empty(),console.log("creating chart query");var t,a=app.map.getLayer("SparrowRanking").visibleLayers[0];if(void 0==e)if(app.map.getLayer("SparrowRanking").layerDefinitions)var r=app.map.getLayer("SparrowRanking").layerDefinitions[a];else var r="1=1";else var r=e;var l=serviceBaseURL+a;t=new esri.tasks.QueryTask(l);var i=getChartOutfields(a),o=[];$.each(i,function(e,t){o.push(t.attribute)});var d=new esri.tasks.Query;d.returnGeometry=!1,d.outFields=o,d.where=r,t.execute(d,B)};var te=z("../images/purple-pin.png",0,12,13,24);new S(S.STYLE_SOLID,new g(g.STYLE_DASHDOT,new l([255,0,0]),2),new l([255,255,0,.5]));$("#tableResizable").resizable({handles:"n"}),$("#geosearchNav").click(function(){V()}),$("#aboutNav").click(function(){Y()}),$("#userGuideNav").click(function(){Q()}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#tableButton").on("click",q),$("#tableResizable_Close").on("click",Z),$("#legendDiv").niceScroll(),app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),app.maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",app.maxLegendDivHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),require(["dijit/form/CheckBox"],function(e){function t(e,t,a,r,l,i){if(app.map.addLayer(a),a.visible&&void 0!==i.hasOpacitySlider&&1==i.hasOpacitySlider&&void 0!==i.hasZoomto&&1==i.hasZoomto)var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');else if(a.visible||void 0===i.hasOpacitySlider||1!=i.hasOpacitySlider||void 0===i.hasZoomto||1!=i.hasZoomto){if(a.visible&&void 0!==i.hasOpacitySlider&&1==i.hasOpacitySlider&&void 0!==i.hasZoomto&&0==i.hasZoomto)var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>');else if(!a.visible&&void 0!==i.hasOpacitySlider&&1==i.hasOpacitySlider&&void 0!==i.hasZoomto&&0==i.hasZoomto)var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+a.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>')}else var o=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+a.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+r+'<span id="opacity'+camelize(r)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');if(o.click(function(e){$(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),e.preventDefault(),e.stopPropagation(),$("#"+camelize(r)).toggle(),a.visible?a.setVisibility(!1):a.setVisibility(!0)}),t){var d=camelize(e);if(!$("#"+d).length){var n=$('<div id="'+d+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");$("#toggle").append(n)}$("#"+d).append(o),$("#opacity"+camelize(r)).length>0&&$("#opacity"+camelize(r)).hover(function(){$(".opacitySlider").remove();var e=app.map.getLayer(l.id).opacity,t=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+e+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(t),$("#slider")[0].value=100*e,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;console.log("o: "+t),$("#opacityValue").html("Opacity: "+t),app.map.getLayer(l.id).setOpacity(t)})}),$(".zoomto").hover(function(e){$(".zoomDialog").remove();var t=$('<div class="zoomDialog"><label class="zoomClose pull-right">X</label><br><div class="list-group"><a href="#" id="zoomscale" class="list-group-item lgi-zoom zoomscale">Zoom to scale</a> <a id="zoomcenter" href="#" class="list-group-item lgi-zoom zoomcenter">Zoom to center</a><a id="zoomextent" href="#" class="list-group-item lgi-zoom zoomextent">Zoom to extent</a></div></div>');$("body").append(t),$(".zoomDialog").css("left",e.clientX-80),$(".zoomDialog").css("top",e.clientY-5),$(".zoomDialog").mouseleave(function(){$(".zoomDialog").remove()}),$(".zoomClose").click(function(){$(".zoomDialog").remove()}),$("#zoomscale").click(function(e,t){var a=app.map.getLayer("SparrowRanking").minScale;a>0?app.map.setScale(a):console.log("No minimum scale for layer.")}),$("#zoomcenter").click(function(e,t){var a=app.map.getLayer("SparrowRanking").fullExtent.getCenter(),r=new h(a.x,a.y,new k({wkid:4326}));app.map.centerAt(r)}),$("#zoomextent")&&$("#zoomextent").click(function(e,t){var a=app.map.getLayer("SparrowRanking").fullExtent,r=new A;r.outSR=new k(102100),r.geometries=[a],geomService.project(r,function(e){var t=e[0];map.setExtent(t,new k({wkid:102100}))})})})}}$.each(allLayers,function(e,a){$.each(a.layers,function(e,r){var l=new n(r.url,r.options);r.visibleLayers&&l.setVisibleLayers(r.visibleLayers),t(a.groupHeading,a.showGroupHeading,l,e,r.options,r.wimOptions)})})})}),$(".selectpicker").selectpicker();